var ThreeSixty,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ThreeSixty = (function() {
  ThreeSixty.prototype.Scale = 10;

  ThreeSixty.prototype.MaxRotation = Math.PI / 4;

  ThreeSixty.prototype.LEFT = 'left';

  ThreeSixty.prototype.RIGHT = 'right';

  ThreeSixty.prototype.UP = 'up';

  ThreeSixty.prototype.DOWN = 'down';

  ThreeSixty.prototype.IN = 'in';

  ThreeSixty.prototype.OUT = 'out';

  ThreeSixty.prototype.RESET = 'reset';

  ThreeSixty.prototype.CAMERA_MODE = 'camera_mode';

  ThreeSixty.prototype.ARROW_MODE = 'arrow_mode';

  function ThreeSixty(box, urls) {
    this.render = bind(this.render, this);
    this.shouldRerender = bind(this.shouldRerender, this);
    this.processMovements = bind(this.processMovements, this);
    this.quadraticEaseInEaseOut = bind(this.quadraticEaseInEaseOut, this);
    this.processPanTo = bind(this.processPanTo, this);
    this.startRender = bind(this.startRender, this);
    this.clampRotation = bind(this.clampRotation, this);
    this.clampPosition = bind(this.clampPosition, this);
    this.move = bind(this.move, this);
    this.getDirection = bind(this.getDirection, this);
    this.beginKeyPress = bind(this.beginKeyPress, this);
    this.endKeyPress = bind(this.endKeyPress, this);
    this.eventMouseUp = bind(this.eventMouseUp, this);
    this.eventMouseMove = bind(this.eventMouseMove, this);
    this.eventMouseDown = bind(this.eventMouseDown, this);
    this.eventOnKeyUp = bind(this.eventOnKeyUp, this);
    this.eventOnKeyDown = bind(this.eventOnKeyDown, this);
    this.eventDoDomControl = bind(this.eventDoDomControl, this);
    this.initControls = bind(this.initControls, this);
    this.initRenderer = bind(this.initRenderer, this);
    this.initObjects = bind(this.initObjects, this);
    this.initScene = bind(this.initScene, this);
    this.urls = urls;
    this.box = box;
    this.directions = {};
    this.mouse = {
      active: false,
      panning: false,
      speed: {
        x: 0,
        y: 0,
        z: 0
      }
    };
    this.panTo = {
      active: false,
      time: {
        start: 0,
        end: 0
      },
      from: {
        rotation: {
          x: 0,
          y: 0,
          z: 0
        }
      },
      to: {
        rotation: {
          x: 0,
          y: 0,
          z: 0
        }
      }
    };
    this.isRendering = false;
    this.compassNeedle = document.getElementById('compass-direction-icon');
  }

  ThreeSixty.prototype.start = function() {
    this.initScene((function(_this) {
      return function() {
        _this.initObjects(function() {
          _this.initRenderer(function() {
            _this.initControls(function() {
              _this.doRender();
            });
          });
        });
      };
    })(this));
  };

  ThreeSixty.prototype.initScene = function(cb) {
    this.scene = new THREE.Scene;
    this.camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, ThreeSixty.prototype.Scale * 10);
    this.parentObject = new THREE.Object3D();
    this.parentObject.rotation.order = 'YXZ';
    this.scene.add(this.parentObject);
    this.parentObject.add(this.camera);
    this.selectedObject = this.camera;
    this.camera.rotation.order = 'YXZ';
    window.addEventListener('resize', ((function(_this) {
      return function() {
        _this.camera.aspect = window.innerWidth / window.innerHeight;
        _this.camera.updateProjectionMatrix();
        _this.renderer.setSize(window.innerWidth, window.innerHeight);
        _this.doRender();
      };
    })(this)), false);
    return cb();
  };

  ThreeSixty.prototype.initObjects = function(cb) {
    return THREE.ImageUtils.loadTextureCube(this.urls, null, (function(_this) {
      return function(texture) {
        var addBox, material, meshGeometry, shader, skyBox, uniforms;
        shader = THREE.ShaderLib['cube'];
        uniforms = THREE.UniformsUtils.clone(shader.uniforms);
        uniforms['tCube'].value = texture;
        material = new THREE.ShaderMaterial({
          fragmentShader: shader.fragmentShader,
          vertexShader: shader.vertexShader,
          uniforms: uniforms,
          side: THREE.BackSide
        });
        meshGeometry = new THREE.SphereGeometry(ThreeSixty.prototype.Scale, 32, 32);
        skyBox = new THREE.Mesh(meshGeometry, material);
        addBox = (function() {
          var cube, d, geometry;
          d = Math.sqrt(2 * ThreeSixty.prototype.Scale * ThreeSixty.prototype.Scale);
          geometry = new THREE.BoxGeometry(d, d, d);
          material = new THREE.MeshBasicMaterial({
            color: 0x00ff00
          });
          material.wireframe = true;
          cube = new THREE.Mesh(geometry, material);
          cube.position.x = 0;
          cube.position.y = 0;
          cube.position.z = 0;
          return _this.scene.add(cube);
        });
        _this.scene.add(skyBox);
        return cb();
      };
    })(this));
  };

  ThreeSixty.prototype.initRenderer = function(cb) {
    this.renderer = new THREE.WebGLRenderer();
    this.renderer.setSize(window.innerWidth, window.innerHeight);
    this.box.appendChild(this.renderer.domElement);
    return cb();
  };

  ThreeSixty.prototype.initControls = function(cb) {
    var fn, i, len, mapControl, mapControls;
    document.addEventListener('keydown', this.eventOnKeyDown, false);
    document.addEventListener('keyup', this.eventOnKeyUp, false);
    this.renderer.domElement.addEventListener('mousedown', this.eventMouseDown, false);
    this.renderer.domElement.addEventListener('mousemove', this.eventMouseMove, false);
    this.renderer.domElement.addEventListener('mouseup', this.eventMouseUp, false);
    this.renderer.domElement.addEventListener('mouseout', this.eventMouseUp, false);
    mapControls = document.querySelectorAll('[data-map-control]');
    fn = (function(_this) {
      return function(mapControl) {
        var direction;
        direction = mapControl.dataset.mapControl;
        return mapControl.addEventListener('click', function(e) {
          e.preventDefault();
          _this.eventDoDomControl(direction);
        });
      };
    })(this);
    for (i = 0, len = mapControls.length; i < len; i++) {
      mapControl = mapControls[i];
      fn(mapControl);
    }
    return cb();
  };

  ThreeSixty.prototype.eventDoDomControl = function(operation) {
    var fromRotation;
    this.panTo.time.start = (new Date()).getTime();
    this.panTo.time.end = this.panTo.time.start + 700;
    fromRotation = this.parentObject.rotation.clone();
    this.panTo.from.rotation = fromRotation;
    this.panTo.to.rotation = fromRotation.clone();
    this.panTo.from.position = this.selectedObject.position.z;
    this.panTo.to.position = this.panTo.from.position;
    switch (operation) {
      case ThreeSixty.prototype.LEFT:
        this.panTo.to.rotation.y = this.panTo.from.rotation.y + Math.PI / 2;
        break;
      case ThreeSixty.prototype.RIGHT:
        this.panTo.to.rotation.y = this.panTo.from.rotation.y - Math.PI / 2;
        break;
      case ThreeSixty.prototype.IN:
        this.panTo.to.position -= 1;
        break;
      case ThreeSixty.prototype.OUT:
        this.panTo.to.position += 1;
        break;
      case ThreeSixty.prototype.RESET:
        this.parentObject.rotation.y = this.parentObject.rotation.y % (2 * Math.PI);
        this.panTo.to.rotation.x = 0;
        this.panTo.to.rotation.y = 0;
        this.panTo.to.position = 0;
        break;
      default:
        console.log("can't do " + operation);
        return;
    }
    this.panTo.to.position = this.clampPosition(this.panTo.to.position);
    this.clampRotation(this.panTo.to);
    this.panTo.active = true;
    this.startRender();
  };

  ThreeSixty.prototype.eventOnKeyDown = function(e) {
    var dir;
    dir = this.getDirection(e.keyCode);
    if (dir != null) {
      e.preventDefault();
      this.beginKeyPress(dir);
    }
  };

  ThreeSixty.prototype.eventOnKeyUp = function(e) {
    var dir;
    dir = this.getDirection(e.keyCode);
    if (dir != null) {
      this.endKeyPress(dir);
    }
  };

  ThreeSixty.prototype.eventMouseDown = function() {};

  ThreeSixty.prototype.eventMouseMove = function(e) {};

  ThreeSixty.prototype.eventMouseUp = function() {};

  ThreeSixty.prototype.endKeyPress = function(direction) {
    if (this.directions[direction]) {
      return this.directions[direction] = false;
    }
  };

  ThreeSixty.prototype.beginKeyPress = function(direction) {
    if (this.directions[direction]) {
      return;
    }
    this.directions[direction] = true;
    return this.startRender();
  };

  ThreeSixty.prototype.getDirection = function(key) {
    switch (key) {
      case 37:
      case 65:
        return ThreeSixty.prototype.LEFT;
      case 38:
      case 87:
        return ThreeSixty.prototype.UP;
      case 39:
      case 68:
        return ThreeSixty.prototype.RIGHT;
      case 40:
      case 83:
        return ThreeSixty.prototype.DOWN;
      case 187:
        return ThreeSixty.prototype.IN;
      case 189:
        return ThreeSixty.prototype.OUT;
      case 67:
        return ThreeSixty.prototype.CAMERA_MODE;
      case 86:
        return ThreeSixty.prototype.ARROW_MODE;
      default:
        console.error("direction not known: " + key);
        return false;
    }
  };

  ThreeSixty.prototype.move = function(direction) {
    switch (direction) {
      case ThreeSixty.prototype.LEFT:
        this.parentObject.rotation.y += Math.PI / 200;
        break;
      case ThreeSixty.prototype.UP:
        this.parentObject.rotation.x += Math.PI / 200;
        break;
      case ThreeSixty.prototype.RIGHT:
        this.parentObject.rotation.y -= Math.PI / 200;
        break;
      case ThreeSixty.prototype.DOWN:
        this.parentObject.rotation.x -= Math.PI / 200;
        break;
      case ThreeSixty.prototype.IN:
        this.selectedObject.position.z += ThreeSixty.prototype.Scale / -100;
        break;
      case ThreeSixty.prototype.OUT:
        this.selectedObject.position.z += ThreeSixty.prototype.Scale / 100;
        break;
      default:
        null;
    }
    this.selectedObject.position.z = this.clampPosition(this.selectedObject.position.z);
    this.clampRotation(this.parentObject);
  };

  ThreeSixty.prototype.clampPosition = function(position) {
    if (position < ThreeSixty.prototype.Scale * -0.4) {
      return ThreeSixty.prototype.Scale * -0.4;
    } else if (position > 0) {
      return 0;
    } else {
      return position;
    }
  };

  ThreeSixty.prototype.clampRotation = function(object) {
    if (object.rotation.x > ThreeSixty.prototype.MaxRotation) {
      object.rotation.x = ThreeSixty.prototype.MaxRotation;
    }
    if (object.rotation.x < -ThreeSixty.prototype.MaxRotation) {
      object.rotation.x = -ThreeSixty.prototype.MaxRotation;
    }
  };

  ThreeSixty.prototype.startRender = function() {
    if (!this.isRendering) {
      this.isRendering = true;
      this.render();
    }
  };

  ThreeSixty.prototype.processPanTo = function() {
    var Tc;
    Tc = (new Date()).getTime();
    if (this.parentObject.rotation.y !== this.panTo.to.rotation.y) {
      this.parentObject.rotation.y = this.quadraticEaseInEaseOut(Tc, this.panTo.to.rotation.y, this.panTo.from.rotation.y);
    }
    if (this.parentObject.rotation.x !== this.panTo.to.rotation.x) {
      this.parentObject.rotation.x = this.quadraticEaseInEaseOut(Tc, this.panTo.to.rotation.x, this.panTo.from.rotation.x);
    }
    if (this.selectedObject.position.z !== this.panTo.to.position) {
      this.selectedObject.position.z = this.quadraticEaseInEaseOut(Tc, this.panTo.to.position, this.panTo.from.position);
    }
    if (Tc >= this.panTo.time.end) {
      this.parentObject.rotation.y = this.panTo.to.rotation.y;
      this.parentObject.rotation.x = this.panTo.to.rotation.x;
      this.selectedObject.position.z = this.panTo.to.position;
      this.panTo.active = false;
    }
  };

  ThreeSixty.prototype.quadraticEaseInEaseOut = function(Tc, G, B) {
    var t;
    t = 2 * (Tc - this.panTo.time.start) / (this.panTo.time.end - this.panTo.time.start);
    if (t < 1) {
      return ((G - B) / 2) * t * t + B;
    } else {
      t = t - 1;
      return ((B - G) / 2) * (t * (t - 2) - 1) + B;
    }
  };

  ThreeSixty.prototype.processMovements = function() {
    var rotationString;
    _.map(this.directions, (function(_this) {
      return function(enabled, direction) {
        if (enabled) {
          return _this.move(direction);
        }
      };
    })(this));
    if (this.panTo.active) {
      this.processPanTo();
    }
    rotationString = "rotate(" + this.parentObject.rotation.y + "rad)";
    this.compassNeedle.style.webkitTransform = rotationString;
    this.compassNeedle.style.transform = rotationString;
  };

  ThreeSixty.prototype.shouldRerender = function() {
    return this.mouse.panning || _.some(this.directions) || this.panTo.active;
  };

  ThreeSixty.prototype.doRender = function() {
    return this.renderer.render(this.scene, this.camera);
  };

  ThreeSixty.prototype.render = function() {
    if (this.shouldRerender()) {
      requestAnimationFrame(ThreeSixty.prototype.render.bind(this));
      this.processMovements();
      this.doRender();
    } else {
      this.isRendering = false;
    }
  };

  return ThreeSixty;

})();

document.addEventListener('DOMContentLoaded', function() {
  var ts;
  ts = new ThreeSixty(document.body, ['images/yokohama/pos-x.jpg', 'images/yokohama/neg-x.jpg', 'images/yokohama/pos-y.jpg', 'images/yokohama/neg-y.jpg', 'images/yokohama/pos-z.jpg', 'images/yokohama/neg-z.jpg']);
  ts.start();
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRocmVlc2l4dHkuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLElBQUEsVUFBQTtFQUFBLGdGQUFBOztBQUFBO0FBRUUsdUJBQUEsS0FBQSxHQUFPLEVBQVAsQ0FBQTs7QUFBQSx1QkFFQSxXQUFBLEdBQWEsSUFBSSxDQUFDLEVBQUwsR0FBUSxDQUZyQixDQUFBOztBQUFBLHVCQUtBLElBQUEsR0FBTSxNQUxOLENBQUE7O0FBQUEsdUJBTUEsS0FBQSxHQUFPLE9BTlAsQ0FBQTs7QUFBQSx1QkFPQSxFQUFBLEdBQUksSUFQSixDQUFBOztBQUFBLHVCQVFBLElBQUEsR0FBTSxNQVJOLENBQUE7O0FBQUEsdUJBU0EsRUFBQSxHQUFJLElBVEosQ0FBQTs7QUFBQSx1QkFVQSxHQUFBLEdBQUssS0FWTCxDQUFBOztBQUFBLHVCQVdBLEtBQUEsR0FBTyxPQVhQLENBQUE7O0FBQUEsdUJBYUEsV0FBQSxHQUFhLGFBYmIsQ0FBQTs7QUFBQSx1QkFjQSxVQUFBLEdBQVksWUFkWixDQUFBOztBQWdCYSxFQUFBLG9CQUFDLEdBQUQsRUFBTSxJQUFOLEdBQUE7QUFDWCx5Q0FBQSxDQUFBO0FBQUEseURBQUEsQ0FBQTtBQUFBLDZEQUFBLENBQUE7QUFBQSx5RUFBQSxDQUFBO0FBQUEscURBQUEsQ0FBQTtBQUFBLG1EQUFBLENBQUE7QUFBQSx1REFBQSxDQUFBO0FBQUEsdURBQUEsQ0FBQTtBQUFBLHFDQUFBLENBQUE7QUFBQSxxREFBQSxDQUFBO0FBQUEsdURBQUEsQ0FBQTtBQUFBLG1EQUFBLENBQUE7QUFBQSxxREFBQSxDQUFBO0FBQUEseURBQUEsQ0FBQTtBQUFBLHlEQUFBLENBQUE7QUFBQSxxREFBQSxDQUFBO0FBQUEseURBQUEsQ0FBQTtBQUFBLCtEQUFBLENBQUE7QUFBQSxxREFBQSxDQUFBO0FBQUEscURBQUEsQ0FBQTtBQUFBLG1EQUFBLENBQUE7QUFBQSwrQ0FBQSxDQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsSUFBRCxHQUFRLElBQVIsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLEdBQUQsR0FBTyxHQURQLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxVQUFELEdBQWMsRUFIZCxDQUFBO0FBQUEsSUFLQSxJQUFDLENBQUEsS0FBRCxHQUNFO0FBQUEsTUFBQSxNQUFBLEVBQVEsS0FBUjtBQUFBLE1BQ0EsT0FBQSxFQUFTLEtBRFQ7QUFBQSxNQUVBLEtBQUEsRUFDRTtBQUFBLFFBQUEsQ0FBQSxFQUFHLENBQUg7QUFBQSxRQUNBLENBQUEsRUFBRyxDQURIO0FBQUEsUUFFQSxDQUFBLEVBQUcsQ0FGSDtPQUhGO0tBTkYsQ0FBQTtBQUFBLElBYUEsSUFBQyxDQUFBLEtBQUQsR0FDRTtBQUFBLE1BQUEsTUFBQSxFQUFRLEtBQVI7QUFBQSxNQUNBLElBQUEsRUFDRTtBQUFBLFFBQUEsS0FBQSxFQUFPLENBQVA7QUFBQSxRQUNBLEdBQUEsRUFBSyxDQURMO09BRkY7QUFBQSxNQUlBLElBQUEsRUFDRTtBQUFBLFFBQUEsUUFBQSxFQUNFO0FBQUEsVUFBQSxDQUFBLEVBQUcsQ0FBSDtBQUFBLFVBQ0EsQ0FBQSxFQUFHLENBREg7QUFBQSxVQUVBLENBQUEsRUFBRyxDQUZIO1NBREY7T0FMRjtBQUFBLE1BU0EsRUFBQSxFQUNFO0FBQUEsUUFBQSxRQUFBLEVBQ0U7QUFBQSxVQUFBLENBQUEsRUFBRyxDQUFIO0FBQUEsVUFDQSxDQUFBLEVBQUcsQ0FESDtBQUFBLFVBRUEsQ0FBQSxFQUFHLENBRkg7U0FERjtPQVZGO0tBZEYsQ0FBQTtBQUFBLElBNkJBLElBQUMsQ0FBQSxXQUFELEdBQWUsS0E3QmYsQ0FBQTtBQUFBLElBK0JBLElBQUMsQ0FBQSxhQUFELEdBQWlCLFFBQVEsQ0FBQyxjQUFULENBQXdCLHdCQUF4QixDQS9CakIsQ0FEVztFQUFBLENBaEJiOztBQUFBLHVCQWtEQSxLQUFBLEdBQU8sU0FBQSxHQUFBO0FBRUwsSUFBQSxJQUFDLENBQUEsU0FBRCxDQUFXLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFBLEdBQUE7QUFFVCxRQUFBLEtBQUMsQ0FBQSxXQUFELENBQWEsU0FBQSxHQUFBO0FBRVgsVUFBQSxLQUFDLENBQUEsWUFBRCxDQUFjLFNBQUEsR0FBQTtBQUVaLFlBQUEsS0FBQyxDQUFBLFlBQUQsQ0FBYyxTQUFBLEdBQUE7QUFFWixjQUFBLEtBQUMsQ0FBQSxRQUFELENBQUEsQ0FBQSxDQUZZO1lBQUEsQ0FBZCxDQUFBLENBRlk7VUFBQSxDQUFkLENBQUEsQ0FGVztRQUFBLENBQWIsQ0FBQSxDQUZTO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBWCxDQUFBLENBRks7RUFBQSxDQWxEUCxDQUFBOztBQUFBLHVCQXdFQSxTQUFBLEdBQVcsU0FBQyxFQUFELEdBQUE7QUFFVCxJQUFBLElBQUMsQ0FBQSxLQUFELEdBQVMsR0FBQSxDQUFBLEtBQVUsQ0FBQyxLQUFwQixDQUFBO0FBQUEsSUFHQSxJQUFDLENBQUEsTUFBRCxHQUFjLElBQUMsS0FBSyxDQUFDLGlCQUFQLENBQTBCLEVBQTFCLEVBQThCLE1BQU0sQ0FBQyxVQUFQLEdBQW9CLE1BQU0sQ0FBQyxXQUF6RCxFQUFzRSxDQUF0RSxFQUF5RSxVQUFVLENBQUEsU0FBRSxDQUFBLEtBQVosR0FBb0IsRUFBN0YsQ0FIZCxDQUFBO0FBQUEsSUFLQSxJQUFDLENBQUEsWUFBRCxHQUFvQixJQUFBLEtBQUssQ0FBQyxRQUFOLENBQUEsQ0FMcEIsQ0FBQTtBQUFBLElBTUEsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsS0FBdkIsR0FBK0IsS0FOL0IsQ0FBQTtBQUFBLElBT0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxHQUFQLENBQVcsSUFBQyxDQUFBLFlBQVosQ0FQQSxDQUFBO0FBQUEsSUFTQSxJQUFDLENBQUEsWUFBWSxDQUFDLEdBQWQsQ0FBa0IsSUFBQyxDQUFBLE1BQW5CLENBVEEsQ0FBQTtBQUFBLElBWUEsSUFBQyxDQUFBLGNBQUQsR0FBa0IsSUFBQyxDQUFBLE1BWm5CLENBQUE7QUFBQSxJQWlCQSxJQUFDLENBQUEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFqQixHQUF5QixLQWpCekIsQ0FBQTtBQUFBLElBbUJBLE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQyxDQUFDLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFBLEdBQUE7QUFFakMsUUFBQSxLQUFDLENBQUEsTUFBTSxDQUFDLE1BQVIsR0FBaUIsTUFBTSxDQUFDLFVBQVAsR0FBb0IsTUFBTSxDQUFDLFdBQTVDLENBQUE7QUFBQSxRQUNBLEtBQUMsQ0FBQSxNQUFNLENBQUMsc0JBQVIsQ0FBQSxDQURBLENBQUE7QUFBQSxRQUlBLEtBQUMsQ0FBQSxRQUFRLENBQUMsT0FBVixDQUFrQixNQUFNLENBQUMsVUFBekIsRUFBcUMsTUFBTSxDQUFDLFdBQTVDLENBSkEsQ0FBQTtBQUFBLFFBT0EsS0FBQyxDQUFBLFFBQUQsQ0FBQSxDQVBBLENBRmlDO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBRCxDQUFsQyxFQWFHLEtBYkgsQ0FuQkEsQ0FBQTtXQWtDQSxFQUFBLENBQUEsRUFwQ1M7RUFBQSxDQXhFWCxDQUFBOztBQUFBLHVCQThHQSxXQUFBLEdBQWEsU0FBQyxFQUFELEdBQUE7V0FDWCxLQUFLLENBQUMsVUFBVSxDQUFDLGVBQWpCLENBQWlDLElBQUMsQ0FBQSxJQUFsQyxFQUF3QyxJQUF4QyxFQUE4QyxDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxPQUFELEdBQUE7QUFFNUMsWUFBQSx3REFBQTtBQUFBLFFBQUEsTUFBQSxHQUFTLEtBQUssQ0FBQyxTQUFVLENBQUEsTUFBQSxDQUF6QixDQUFBO0FBQUEsUUFHQSxRQUFBLEdBQVcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFwQixDQUEwQixNQUFNLENBQUMsUUFBakMsQ0FIWCxDQUFBO0FBQUEsUUFJQSxRQUFTLENBQUEsT0FBQSxDQUFRLENBQUMsS0FBbEIsR0FBMEIsT0FKMUIsQ0FBQTtBQUFBLFFBT0EsUUFBQSxHQUFlLElBQUMsS0FBSyxDQUFDLGNBQVAsQ0FDYjtBQUFBLFVBQUEsY0FBQSxFQUFnQixNQUFNLENBQUMsY0FBdkI7QUFBQSxVQUNBLFlBQUEsRUFBYyxNQUFNLENBQUMsWUFEckI7QUFBQSxVQUVBLFFBQUEsRUFBVSxRQUZWO0FBQUEsVUFHQSxJQUFBLEVBQU0sS0FBSyxDQUFDLFFBSFo7U0FEYSxDQVBmLENBQUE7QUFBQSxRQWNBLFlBQUEsR0FBbUIsSUFBQyxLQUFLLENBQUMsY0FBUCxDQUF1QixVQUFVLENBQUEsU0FBRSxDQUFBLEtBQW5DLEVBQTBDLEVBQTFDLEVBQThDLEVBQTlDLENBZG5CLENBQUE7QUFBQSxRQWlCQSxNQUFBLEdBQWEsSUFBQyxLQUFLLENBQUMsSUFBUCxDQUFhLFlBQWIsRUFBMkIsUUFBM0IsQ0FqQmIsQ0FBQTtBQUFBLFFBd0JBLE1BQUEsR0FBUyxDQUFDLFNBQUEsR0FBQTtBQUNSLGNBQUEsaUJBQUE7QUFBQSxVQUFBLENBQUEsR0FBSSxJQUFJLENBQUMsSUFBTCxDQUFVLENBQUEsR0FBSSxVQUFVLENBQUEsU0FBRSxDQUFBLEtBQWhCLEdBQXdCLFVBQVUsQ0FBQSxTQUFFLENBQUEsS0FBOUMsQ0FBSixDQUFBO0FBQUEsVUFDQSxRQUFBLEdBQWUsSUFBQyxLQUFLLENBQUMsV0FBUCxDQUFxQixDQUFyQixFQUF3QixDQUF4QixFQUEyQixDQUEzQixDQURmLENBQUE7QUFBQSxVQUdBLFFBQUEsR0FBZSxJQUFDLEtBQUssQ0FBQyxpQkFBUCxDQUEyQjtBQUFBLFlBQUUsS0FBQSxFQUFPLFFBQVQ7V0FBM0IsQ0FIZixDQUFBO0FBQUEsVUFJQSxRQUFRLENBQUMsU0FBVCxHQUFxQixJQUpyQixDQUFBO0FBQUEsVUFNQSxJQUFBLEdBQVcsSUFBQyxLQUFLLENBQUMsSUFBUCxDQUFjLFFBQWQsRUFBd0IsUUFBeEIsQ0FOWCxDQUFBO0FBQUEsVUFRQSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQWQsR0FBa0IsQ0FSbEIsQ0FBQTtBQUFBLFVBU0EsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFkLEdBQWtCLENBVGxCLENBQUE7QUFBQSxVQVVBLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBZCxHQUFrQixDQVZsQixDQUFBO2lCQVlBLEtBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLElBQVgsRUFiUTtRQUFBLENBQUQsQ0F4QlQsQ0FBQTtBQUFBLFFBa0VBLEtBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLE1BQVgsQ0FsRUEsQ0FBQTtlQW9FQSxFQUFBLENBQUEsRUF0RTRDO01BQUEsRUFBQTtJQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBOUMsRUFEVztFQUFBLENBOUdiLENBQUE7O0FBQUEsdUJBdUxBLFlBQUEsR0FBYyxTQUFDLEVBQUQsR0FBQTtBQUNaLElBQUEsSUFBQyxDQUFBLFFBQUQsR0FBZ0IsSUFBQyxLQUFLLENBQUMsYUFBUCxDQUFBLENBQWhCLENBQUE7QUFBQSxJQUNBLElBQUMsQ0FBQSxRQUFRLENBQUMsT0FBVixDQUFrQixNQUFNLENBQUMsVUFBekIsRUFBcUMsTUFBTSxDQUFDLFdBQTVDLENBREEsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLEdBQUcsQ0FBQyxXQUFMLENBQWlCLElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBM0IsQ0FGQSxDQUFBO1dBSUEsRUFBQSxDQUFBLEVBTFk7RUFBQSxDQXZMZCxDQUFBOztBQUFBLHVCQThMQSxZQUFBLEdBQWMsU0FBQyxFQUFELEdBQUE7QUFFWixRQUFBLG1DQUFBO0FBQUEsSUFBQSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsU0FBMUIsRUFBcUMsSUFBQyxDQUFBLGNBQXRDLEVBQXNELEtBQXRELENBQUEsQ0FBQTtBQUFBLElBQ0EsUUFBUSxDQUFDLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLElBQUMsQ0FBQSxZQUFwQyxFQUFrRCxLQUFsRCxDQURBLENBQUE7QUFBQSxJQUlBLElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBVSxDQUFDLGdCQUFyQixDQUFzQyxXQUF0QyxFQUFtRCxJQUFDLENBQUEsY0FBcEQsRUFBb0UsS0FBcEUsQ0FKQSxDQUFBO0FBQUEsSUFLQSxJQUFDLENBQUEsUUFBUSxDQUFDLFVBQVUsQ0FBQyxnQkFBckIsQ0FBc0MsV0FBdEMsRUFBbUQsSUFBQyxDQUFBLGNBQXBELEVBQW9FLEtBQXBFLENBTEEsQ0FBQTtBQUFBLElBTUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxVQUFVLENBQUMsZ0JBQXJCLENBQXNDLFNBQXRDLEVBQWlELElBQUMsQ0FBQSxZQUFsRCxFQUFnRSxLQUFoRSxDQU5BLENBQUE7QUFBQSxJQU9BLElBQUMsQ0FBQSxRQUFRLENBQUMsVUFBVSxDQUFDLGdCQUFyQixDQUFzQyxVQUF0QyxFQUFrRCxJQUFDLENBQUEsWUFBbkQsRUFBaUUsS0FBakUsQ0FQQSxDQUFBO0FBQUEsSUFTQSxXQUFBLEdBQWMsUUFBUSxDQUFDLGdCQUFULENBQTBCLG9CQUExQixDQVRkLENBQUE7QUFXQSxTQUNLLENBQUEsU0FBQSxLQUFBLEdBQUE7YUFBQSxTQUFDLFVBQUQsR0FBQTtBQUNELFlBQUEsU0FBQTtBQUFBLFFBQUEsU0FBQSxHQUFZLFVBQVUsQ0FBQyxPQUFPLENBQUMsVUFBL0IsQ0FBQTtlQUVBLFVBQVUsQ0FBQyxnQkFBWCxDQUE0QixPQUE1QixFQUFxQyxTQUFDLENBQUQsR0FBQTtBQUNuQyxVQUFBLENBQUMsQ0FBQyxjQUFGLENBQUEsQ0FBQSxDQUFBO0FBQUEsVUFFQSxLQUFDLENBQUEsaUJBQUQsQ0FBbUIsU0FBbkIsQ0FGQSxDQURtQztRQUFBLENBQXJDLEVBSEM7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQURMO0FBQUEsU0FBQSw2Q0FBQTtrQ0FBQTtBQUNFLFNBQUksV0FBSixDQURGO0FBQUEsS0FYQTtXQXNCQSxFQUFBLENBQUEsRUF4Qlk7RUFBQSxDQTlMZCxDQUFBOztBQUFBLHVCQXdOQSxpQkFBQSxHQUFtQixTQUFDLFNBQUQsR0FBQTtBQUNqQixRQUFBLFlBQUE7QUFBQSxJQUFBLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQVosR0FBb0IsQ0FBSyxJQUFBLElBQUEsQ0FBQSxDQUFMLENBQVksQ0FBQyxPQUFiLENBQUEsQ0FBcEIsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBWixHQUFrQixJQUFDLENBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFaLEdBQW9CLEdBRHRDLENBQUE7QUFBQSxJQUlBLFlBQUEsR0FBZSxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxLQUF2QixDQUFBLENBSmYsQ0FBQTtBQUFBLElBTUEsSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWixHQUF1QixZQU52QixDQUFBO0FBQUEsSUFPQSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFWLEdBQXFCLFlBQVksQ0FBQyxLQUFiLENBQUEsQ0FQckIsQ0FBQTtBQUFBLElBU0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBWixHQUF1QixJQUFDLENBQUEsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQVRoRCxDQUFBO0FBQUEsSUFVQSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFWLEdBQXFCLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLFFBVmpDLENBQUE7QUFZQSxZQUFPLFNBQVA7QUFBQSxXQUNPLFVBQVUsQ0FBQSxTQUFFLENBQUEsSUFEbkI7QUFHSSxRQUFBLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFuQixHQUF1QixJQUFDLENBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBckIsR0FBeUIsSUFBSSxDQUFDLEVBQUwsR0FBUSxDQUF4RCxDQUhKO0FBQ087QUFEUCxXQUlPLFVBQVUsQ0FBQSxTQUFFLENBQUEsS0FKbkI7QUFNSSxRQUFBLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFuQixHQUF1QixJQUFDLENBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBckIsR0FBeUIsSUFBSSxDQUFDLEVBQUwsR0FBUSxDQUF4RCxDQU5KO0FBSU87QUFKUCxXQU9PLFVBQVUsQ0FBQSxTQUFFLENBQUEsRUFQbkI7QUFRSSxRQUFBLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVYsSUFBc0IsQ0FBdEIsQ0FSSjtBQU9PO0FBUFAsV0FTTyxVQUFVLENBQUEsU0FBRSxDQUFBLEdBVG5CO0FBVUksUUFBQSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFWLElBQXNCLENBQXRCLENBVko7QUFTTztBQVRQLFdBV08sVUFBVSxDQUFBLFNBQUUsQ0FBQSxLQVhuQjtBQVlJLFFBQUEsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBdkIsR0FBMkIsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBdkIsR0FBMkIsQ0FBQyxDQUFBLEdBQUksSUFBSSxDQUFDLEVBQVYsQ0FBdEQsQ0FBQTtBQUFBLFFBRUEsSUFBQyxDQUFBLEtBQUssQ0FBQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQW5CLEdBQXVCLENBRnZCLENBQUE7QUFBQSxRQUdBLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFuQixHQUF1QixDQUh2QixDQUFBO0FBQUEsUUFJQSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFWLEdBQXFCLENBSnJCLENBWko7QUFXTztBQVhQO0FBa0JJLFFBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxXQUFBLEdBQVksU0FBeEIsQ0FBQSxDQUFBO0FBQ0EsY0FBQSxDQW5CSjtBQUFBLEtBWkE7QUFBQSxJQWlDQSxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFWLEdBQXFCLElBQUMsQ0FBQSxhQUFELENBQWUsSUFBQyxDQUFBLEtBQUssQ0FBQyxFQUFFLENBQUMsUUFBekIsQ0FqQ3JCLENBQUE7QUFBQSxJQWtDQSxJQUFDLENBQUEsYUFBRCxDQUFlLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBdEIsQ0FsQ0EsQ0FBQTtBQUFBLElBcUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsTUFBUCxHQUFnQixJQXJDaEIsQ0FBQTtBQUFBLElBd0NBLElBQUMsQ0FBQSxXQUFELENBQUEsQ0F4Q0EsQ0FEaUI7RUFBQSxDQXhObkIsQ0FBQTs7QUFBQSx1QkFxUUEsY0FBQSxHQUFnQixTQUFDLENBQUQsR0FBQTtBQUVkLFFBQUEsR0FBQTtBQUFBLElBQUEsR0FBQSxHQUFNLElBQUMsQ0FBQSxZQUFELENBQWMsQ0FBQyxDQUFDLE9BQWhCLENBQU4sQ0FBQTtBQUdBLElBQUEsSUFBRyxXQUFIO0FBQ0UsTUFBQSxDQUFDLENBQUMsY0FBRixDQUFBLENBQUEsQ0FBQTtBQUFBLE1BR0EsSUFBQyxDQUFBLGFBQUQsQ0FBZSxHQUFmLENBSEEsQ0FERjtLQUxjO0VBQUEsQ0FyUWhCLENBQUE7O0FBQUEsdUJBbVJBLFlBQUEsR0FBYyxTQUFDLENBQUQsR0FBQTtBQUVaLFFBQUEsR0FBQTtBQUFBLElBQUEsR0FBQSxHQUFNLElBQUMsQ0FBQSxZQUFELENBQWMsQ0FBQyxDQUFDLE9BQWhCLENBQU4sQ0FBQTtBQUdBLElBQUEsSUFBRyxXQUFIO01BRUUsSUFBQyxDQUFBLFdBQUQsQ0FBYSxHQUFiLEVBRkY7S0FMWTtFQUFBLENBblJkLENBQUE7O0FBQUEsdUJBK1JBLGNBQUEsR0FBZ0IsU0FBQSxHQUFBLENBL1JoQixDQUFBOztBQUFBLHVCQWtTQSxjQUFBLEdBQWdCLFNBQUMsQ0FBRCxHQUFBLENBbFNoQixDQUFBOztBQUFBLHVCQXFTQSxZQUFBLEdBQWMsU0FBQSxHQUFBLENBclNkLENBQUE7O0FBQUEsdUJBd1NBLFdBQUEsR0FBYSxTQUFDLFNBQUQsR0FBQTtBQUVYLElBQUEsSUFBa0MsSUFBQyxDQUFBLFVBQVcsQ0FBQSxTQUFBLENBQTlDO2FBQUEsSUFBQyxDQUFBLFVBQVcsQ0FBQSxTQUFBLENBQVosR0FBeUIsTUFBekI7S0FGVztFQUFBLENBeFNiLENBQUE7O0FBQUEsdUJBNFNBLGFBQUEsR0FBZSxTQUFDLFNBQUQsR0FBQTtBQUViLElBQUEsSUFBRyxJQUFDLENBQUEsVUFBVyxDQUFBLFNBQUEsQ0FBZjtBQUVFLFlBQUEsQ0FGRjtLQUFBO0FBQUEsSUFLQSxJQUFDLENBQUEsVUFBVyxDQUFBLFNBQUEsQ0FBWixHQUF5QixJQUx6QixDQUFBO1dBT0EsSUFBQyxDQUFBLFdBQUQsQ0FBQSxFQVRhO0VBQUEsQ0E1U2YsQ0FBQTs7QUFBQSx1QkF1VEEsWUFBQSxHQUFjLFNBQUMsR0FBRCxHQUFBO0FBQ1osWUFBTyxHQUFQO0FBQUEsV0FDTyxFQURQO0FBQUEsV0FDVyxFQURYO2VBQ21CLFVBQVUsQ0FBQSxTQUFFLENBQUEsS0FEL0I7QUFBQSxXQUVPLEVBRlA7QUFBQSxXQUVXLEVBRlg7ZUFFbUIsVUFBVSxDQUFBLFNBQUUsQ0FBQSxHQUYvQjtBQUFBLFdBR08sRUFIUDtBQUFBLFdBR1csRUFIWDtlQUdtQixVQUFVLENBQUEsU0FBRSxDQUFBLE1BSC9CO0FBQUEsV0FJTyxFQUpQO0FBQUEsV0FJVyxFQUpYO2VBSW1CLFVBQVUsQ0FBQSxTQUFFLENBQUEsS0FKL0I7QUFBQSxXQUtPLEdBTFA7ZUFLZ0IsVUFBVSxDQUFBLFNBQUUsQ0FBQSxHQUw1QjtBQUFBLFdBTU8sR0FOUDtlQU1nQixVQUFVLENBQUEsU0FBRSxDQUFBLElBTjVCO0FBQUEsV0FPTyxFQVBQO2VBT2UsVUFBVSxDQUFBLFNBQUUsQ0FBQSxZQVAzQjtBQUFBLFdBUU8sRUFSUDtlQVFlLFVBQVUsQ0FBQSxTQUFFLENBQUEsV0FSM0I7QUFBQTtBQVVJLFFBQUEsT0FBTyxDQUFDLEtBQVIsQ0FBYyx1QkFBQSxHQUF3QixHQUF0QyxDQUFBLENBQUE7ZUFDQSxNQVhKO0FBQUEsS0FEWTtFQUFBLENBdlRkLENBQUE7O0FBQUEsdUJBcVVBLElBQUEsR0FBTSxTQUFDLFNBQUQsR0FBQTtBQUNKLFlBQU8sU0FBUDtBQUFBLFdBQ08sVUFBVSxDQUFBLFNBQUUsQ0FBQSxJQURuQjtBQUVJLFFBQUEsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBdkIsSUFBNEIsSUFBSSxDQUFDLEVBQUwsR0FBVSxHQUF0QyxDQUZKO0FBQ087QUFEUCxXQUdPLFVBQVUsQ0FBQSxTQUFFLENBQUEsRUFIbkI7QUFJSSxRQUFBLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLElBQTRCLElBQUksQ0FBQyxFQUFMLEdBQVUsR0FBdEMsQ0FKSjtBQUdPO0FBSFAsV0FLTyxVQUFVLENBQUEsU0FBRSxDQUFBLEtBTG5CO0FBTUksUUFBQSxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixJQUE0QixJQUFJLENBQUMsRUFBTCxHQUFVLEdBQXRDLENBTko7QUFLTztBQUxQLFdBT08sVUFBVSxDQUFBLFNBQUUsQ0FBQSxJQVBuQjtBQVFJLFFBQUEsSUFBQyxDQUFBLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBdkIsSUFBNEIsSUFBSSxDQUFDLEVBQUwsR0FBVSxHQUF0QyxDQVJKO0FBT087QUFQUCxXQVNPLFVBQVUsQ0FBQSxTQUFFLENBQUEsRUFUbkI7QUFVSSxRQUFBLElBQUMsQ0FBQSxjQUFjLENBQUMsUUFBUSxDQUFDLENBQXpCLElBQThCLFVBQVUsQ0FBQSxTQUFFLENBQUEsS0FBWixHQUFvQixDQUFBLEdBQWxELENBVko7QUFTTztBQVRQLFdBV08sVUFBVSxDQUFBLFNBQUUsQ0FBQSxHQVhuQjtBQVlJLFFBQUEsSUFBQyxDQUFBLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBekIsSUFBOEIsVUFBVSxDQUFBLFNBQUUsQ0FBQSxLQUFaLEdBQW9CLEdBQWxELENBWko7QUFXTztBQVhQO0FBYU8sUUFBQSxJQUFBLENBYlA7QUFBQSxLQUFBO0FBQUEsSUFlQSxJQUFDLENBQUEsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUF6QixHQUE2QixJQUFDLENBQUEsYUFBRCxDQUFlLElBQUMsQ0FBQSxjQUFjLENBQUMsUUFBUSxDQUFDLENBQXhDLENBZjdCLENBQUE7QUFBQSxJQWdCQSxJQUFDLENBQUEsYUFBRCxDQUFlLElBQUMsQ0FBQSxZQUFoQixDQWhCQSxDQURJO0VBQUEsQ0FyVU4sQ0FBQTs7QUFBQSx1QkEwVkEsYUFBQSxHQUFlLFNBQUMsUUFBRCxHQUFBO0FBQ2IsSUFBQSxJQUFHLFFBQUEsR0FBVyxVQUFVLENBQUEsU0FBRSxDQUFBLEtBQVosR0FBb0IsQ0FBQSxHQUFsQzthQUNFLFVBQVUsQ0FBQSxTQUFFLENBQUEsS0FBWixHQUFvQixDQUFBLElBRHRCO0tBQUEsTUFFSyxJQUFHLFFBQUEsR0FBVyxDQUFkO2FBQ0gsRUFERztLQUFBLE1BQUE7YUFHSCxTQUhHO0tBSFE7RUFBQSxDQTFWZixDQUFBOztBQUFBLHVCQWtXQSxhQUFBLEdBQWUsU0FBQyxNQUFELEdBQUE7QUFDYixJQUFBLElBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFoQixHQUFvQixVQUFVLENBQUEsU0FBRSxDQUFBLFdBQW5DO0FBQ0UsTUFBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLFVBQVUsQ0FBQSxTQUFFLENBQUEsV0FBaEMsQ0FERjtLQUFBO0FBR0EsSUFBQSxJQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBaEIsR0FBb0IsQ0FBQSxVQUFXLENBQUEsU0FBRSxDQUFBLFdBQXBDO0FBQ0UsTUFBQSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQWhCLEdBQW9CLENBQUEsVUFBVyxDQUFBLFNBQUUsQ0FBQSxXQUFqQyxDQURGO0tBSmE7RUFBQSxDQWxXZixDQUFBOztBQUFBLHVCQTJXQSxXQUFBLEdBQWEsU0FBQSxHQUFBO0FBRVgsSUFBQSxJQUFHLENBQUEsSUFBRSxDQUFBLFdBQUw7QUFHRSxNQUFBLElBQUMsQ0FBQSxXQUFELEdBQWUsSUFBZixDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsTUFBRCxDQUFBLENBSEEsQ0FIRjtLQUZXO0VBQUEsQ0EzV2IsQ0FBQTs7QUFBQSx1QkF1WEEsWUFBQSxHQUFjLFNBQUEsR0FBQTtBQUNaLFFBQUEsRUFBQTtBQUFBLElBQUEsRUFBQSxHQUFLLENBQUssSUFBQSxJQUFBLENBQUEsQ0FBTCxDQUFZLENBQUMsT0FBYixDQUFBLENBQUwsQ0FBQTtBQUVBLElBQUEsSUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixLQUE0QixJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBbEQ7QUFDRSxNQUFBLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCLElBQUMsQ0FBQSxzQkFBRCxDQUF3QixFQUF4QixFQUE0QixJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBL0MsRUFBa0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQXZFLENBQTNCLENBREY7S0FGQTtBQUtBLElBQUEsSUFBRyxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixLQUE0QixJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBbEQ7QUFDRSxNQUFBLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCLElBQUMsQ0FBQSxzQkFBRCxDQUF3QixFQUF4QixFQUE0QixJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBL0MsRUFBa0QsSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQXZFLENBQTNCLENBREY7S0FMQTtBQVFBLElBQUEsSUFBRyxJQUFDLENBQUEsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUF6QixLQUE4QixJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUEzQztBQUNFLE1BQUEsSUFBQyxDQUFBLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBekIsR0FBNkIsSUFBQyxDQUFBLHNCQUFELENBQXdCLEVBQXhCLEVBQTRCLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBRSxDQUFDLFFBQXRDLEVBQWdELElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQTVELENBQTdCLENBREY7S0FSQTtBQVdBLElBQUEsSUFBRyxFQUFBLElBQU0sSUFBQyxDQUFBLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBckI7QUFDRSxNQUFBLElBQUMsQ0FBQSxZQUFZLENBQUMsUUFBUSxDQUFDLENBQXZCLEdBQTJCLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUE5QyxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUF2QixHQUEyQixJQUFDLENBQUEsS0FBSyxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FEOUMsQ0FBQTtBQUFBLE1BRUEsSUFBQyxDQUFBLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBekIsR0FBNkIsSUFBQyxDQUFBLEtBQUssQ0FBQyxFQUFFLENBQUMsUUFGdkMsQ0FBQTtBQUFBLE1BS0EsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFQLEdBQWdCLEtBTGhCLENBREY7S0FaWTtFQUFBLENBdlhkLENBQUE7O0FBQUEsdUJBNllBLHNCQUFBLEdBQXdCLFNBQUMsRUFBRCxFQUFLLENBQUwsRUFBUSxDQUFSLEdBQUE7QUFFdEIsUUFBQSxDQUFBO0FBQUEsSUFBQSxDQUFBLEdBQUksQ0FBQSxHQUFJLENBQUMsRUFBQSxHQUFLLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQWxCLENBQUosR0FBK0IsQ0FBQyxJQUFDLENBQUEsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFaLEdBQWtCLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQS9CLENBQW5DLENBQUE7QUFFQSxJQUFBLElBQUcsQ0FBQSxHQUFJLENBQVA7QUFDRSxhQUFPLENBQUMsQ0FBQyxDQUFBLEdBQUksQ0FBTCxDQUFBLEdBQVEsQ0FBVCxDQUFBLEdBQWMsQ0FBZCxHQUFrQixDQUFsQixHQUFzQixDQUE3QixDQURGO0tBQUEsTUFBQTtBQUdFLE1BQUEsQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFSLENBQUE7QUFDQSxhQUFPLENBQUMsQ0FBQyxDQUFBLEdBQUksQ0FBTCxDQUFBLEdBQVEsQ0FBVCxDQUFBLEdBQWMsQ0FBQyxDQUFBLEdBQUksQ0FBQyxDQUFBLEdBQUksQ0FBTCxDQUFKLEdBQWMsQ0FBZixDQUFkLEdBQWtDLENBQXpDLENBSkY7S0FKc0I7RUFBQSxDQTdZeEIsQ0FBQTs7QUFBQSx1QkF1WkEsZ0JBQUEsR0FBa0IsU0FBQSxHQUFBO0FBQ2hCLFFBQUEsY0FBQTtBQUFBLElBQUEsQ0FBQyxDQUFDLEdBQUYsQ0FBTSxJQUFDLENBQUEsVUFBUCxFQUFtQixDQUFBLFNBQUEsS0FBQSxHQUFBO2FBQUEsU0FBQyxPQUFELEVBQVUsU0FBVixHQUFBO0FBQ2pCLFFBQUEsSUFBbUIsT0FBbkI7aUJBQUEsS0FBQyxDQUFBLElBQUQsQ0FBTSxTQUFOLEVBQUE7U0FEaUI7TUFBQSxFQUFBO0lBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFuQixDQUFBLENBQUE7QUFHQSxJQUFBLElBQUcsSUFBQyxDQUFBLEtBQUssQ0FBQyxNQUFWO0FBQ0UsTUFBQSxJQUFDLENBQUEsWUFBRCxDQUFBLENBQUEsQ0FERjtLQUhBO0FBQUEsSUFPQSxjQUFBLEdBQWlCLFNBQUEsR0FBVSxJQUFDLENBQUEsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFqQyxHQUFtQyxNQVBwRCxDQUFBO0FBQUEsSUFRQSxJQUFDLENBQUEsYUFBYSxDQUFDLEtBQUssQ0FBQyxlQUFyQixHQUF1QyxjQVJ2QyxDQUFBO0FBQUEsSUFTQSxJQUFDLENBQUEsYUFBYSxDQUFDLEtBQUssQ0FBQyxTQUFyQixHQUFpQyxjQVRqQyxDQURnQjtFQUFBLENBdlpsQixDQUFBOztBQUFBLHVCQXFhQSxjQUFBLEdBQWdCLFNBQUEsR0FBQTtXQUVkLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FBUCxJQUFrQixDQUFDLENBQUMsSUFBRixDQUFPLElBQUMsQ0FBQSxVQUFSLENBQWxCLElBQXlDLElBQUMsQ0FBQSxLQUFLLENBQUMsT0FGbEM7RUFBQSxDQXJhaEIsQ0FBQTs7QUFBQSx1QkF5YUEsUUFBQSxHQUFVLFNBQUEsR0FBQTtXQUVSLElBQUMsQ0FBQSxRQUFRLENBQUMsTUFBVixDQUFpQixJQUFDLENBQUEsS0FBbEIsRUFBeUIsSUFBQyxDQUFBLE1BQTFCLEVBRlE7RUFBQSxDQXphVixDQUFBOztBQUFBLHVCQTZhQSxNQUFBLEdBQVEsU0FBQSxHQUFBO0FBQ04sSUFBQSxJQUFHLElBQUMsQ0FBQSxjQUFELENBQUEsQ0FBSDtBQUVFLE1BQUEscUJBQUEsQ0FBc0IsVUFBVSxDQUFBLFNBQUUsQ0FBQSxNQUFNLENBQUMsSUFBbkIsQ0FBd0IsSUFBeEIsQ0FBdEIsQ0FBQSxDQUFBO0FBQUEsTUFHQSxJQUFDLENBQUEsZ0JBQUQsQ0FBQSxDQUhBLENBQUE7QUFBQSxNQU1BLElBQUMsQ0FBQSxRQUFELENBQUEsQ0FOQSxDQUZGO0tBQUEsTUFBQTtBQVlFLE1BQUEsSUFBQyxDQUFBLFdBQUQsR0FBZSxLQUFmLENBWkY7S0FETTtFQUFBLENBN2FSLENBQUE7O29CQUFBOztJQUZGLENBQUE7O0FBQUEsUUFnY1EsQ0FBQyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsU0FBQSxHQUFBO0FBQzVDLE1BQUEsRUFBQTtBQUFBLEVBQUEsRUFBQSxHQUFTLElBQUEsVUFBQSxDQUFXLFFBQVEsQ0FBQyxJQUFwQixFQUEwQixDQUNqQywyQkFEaUMsRUFFakMsMkJBRmlDLEVBR2pDLDJCQUhpQyxFQUlqQywyQkFKaUMsRUFLakMsMkJBTGlDLEVBTWpDLDJCQU5pQyxDQUExQixDQUFULENBQUE7QUFBQSxFQVNBLEVBQUUsQ0FBQyxLQUFILENBQUEsQ0FUQSxDQUQ0QztBQUFBLENBQTlDLENBaGNBLENBQUEiLCJmaWxlIjoidGhyZWVzaXh0eS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUaHJlZVNpeHR5XG5cbiAgU2NhbGU6IDEwXG5cbiAgTWF4Um90YXRpb246IE1hdGguUEkvNFxuXG4gICMgRGlyZWN0aW9uIGNvbnN0YW50c1xuICBMRUZUOiAnbGVmdCdcbiAgUklHSFQ6ICdyaWdodCdcbiAgVVA6ICd1cCdcbiAgRE9XTjogJ2Rvd24nXG4gIElOOiAnaW4nXG4gIE9VVDogJ291dCdcbiAgUkVTRVQ6ICdyZXNldCdcblxuICBDQU1FUkFfTU9ERTogJ2NhbWVyYV9tb2RlJ1xuICBBUlJPV19NT0RFOiAnYXJyb3dfbW9kZSdcblxuICBjb25zdHJ1Y3RvcjogKGJveCwgdXJscykgLT5cbiAgICBAdXJscyA9IHVybHNcbiAgICBAYm94ID0gYm94XG5cbiAgICBAZGlyZWN0aW9ucyA9IHt9XG5cbiAgICBAbW91c2UgPVxuICAgICAgYWN0aXZlOiBmYWxzZVxuICAgICAgcGFubmluZzogZmFsc2VcbiAgICAgIHNwZWVkOlxuICAgICAgICB4OiAwXG4gICAgICAgIHk6IDBcbiAgICAgICAgejogMFxuXG4gICAgQHBhblRvID1cbiAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgIHRpbWU6XG4gICAgICAgIHN0YXJ0OiAwXG4gICAgICAgIGVuZDogMFxuICAgICAgZnJvbTpcbiAgICAgICAgcm90YXRpb246XG4gICAgICAgICAgeDogMFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgICB6OiAwXG4gICAgICB0bzpcbiAgICAgICAgcm90YXRpb246XG4gICAgICAgICAgeDogMFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgICB6OiAwXG5cbiAgICBAaXNSZW5kZXJpbmcgPSBmYWxzZVxuXG4gICAgQGNvbXBhc3NOZWVkbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCAnY29tcGFzcy1kaXJlY3Rpb24taWNvbidcblxuICBzdGFydDogLT5cbiAgICAjIENyZWF0ZSB0aGUgc2NlbmVcbiAgICBAaW5pdFNjZW5lID0+XG4gICAgICAjIEFkZCB0aGUgb2JqZWN0cyB0byByZW5kZXJcbiAgICAgIEBpbml0T2JqZWN0cyA9PlxuICAgICAgICAjIEFkZCB0aGUgcmVuZGVyZXJcbiAgICAgICAgQGluaXRSZW5kZXJlciA9PlxuICAgICAgICAgICMgQWRkIHRoZSBjYWxsYmFja3MgZm9yIG1hbmFnZW1lbnRcbiAgICAgICAgICBAaW5pdENvbnRyb2xzID0+XG4gICAgICAgICAgICAjIEZvcmNlIGEgcmVuZGVyXG4gICAgICAgICAgICBAZG9SZW5kZXIoKVxuXG4gICAgICAgICAgICByZXR1cm5cblxuICAgICAgICAgIHJldHVyblxuXG4gICAgICAgIHJldHVyblxuXG4gICAgICByZXR1cm5cblxuICAgIHJldHVyblxuXG4gIGluaXRTY2VuZTogKGNiKSA9PlxuICAgICMgSW5pdCBTY2VuZVxuICAgIEBzY2VuZSA9IG5ldyAoVEhSRUUuU2NlbmUpXG5cbiAgICAjIEluaXQgQ2FtZXJhXG4gICAgQGNhbWVyYSA9IG5ldyAoVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEpKDcwLCB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodCwgMSwgVGhyZWVTaXh0eTo6U2NhbGUgKiAxMClcblxuICAgIEBwYXJlbnRPYmplY3QgPSBuZXcgVEhSRUUuT2JqZWN0M0QoKVxuICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ub3JkZXIgPSAnWVhaJ1xuICAgIEBzY2VuZS5hZGQgQHBhcmVudE9iamVjdFxuXG4gICAgQHBhcmVudE9iamVjdC5hZGQgQGNhbWVyYVxuXG4gICAgIyB1cGRhdGUgdGhlIHNlbGVjdGVkT2JqZWN0IHZhcmlhYmxlXG4gICAgQHNlbGVjdGVkT2JqZWN0ID0gQGNhbWVyYVxuXG4gICAgIyBAY2FtZXJhLnBvc2l0aW9uLnogPSBUaHJlZVNpeHR5OjpTY2FsZSAqIDJcblxuICAgICMgQmVjYXVzZSB3ZSBkb24ndCByb3RhdGUgaW4gdGhlIFogZGlyZWN0aW9uLCB0aGlzIHdpbGwgYmUgYSBuYXR1cmFsIHJvdGF0aW9uIG9yZGVyXG4gICAgQGNhbWVyYS5yb3RhdGlvbi5vcmRlciA9ICdZWFonXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAncmVzaXplJywgKCgpID0+XG4gICAgICAjIENvcnJlY3QgdGhlIGNhbWVyYSdzIGFzcGVjdCByYXRpb1xuICAgICAgQGNhbWVyYS5hc3BlY3QgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodFxuICAgICAgQGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KClcblxuICAgICAgIyBBZGp1c3QgdGhlIHJlbmRlcmVyIHNpemVcbiAgICAgIEByZW5kZXJlci5zZXRTaXplIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHRcblxuICAgICAgIyBSZS1yZW5kZXIgdGhpcyBvbmUgdGltZVxuICAgICAgQGRvUmVuZGVyKClcblxuICAgICAgIyBFeGl0XG4gICAgICByZXR1cm5cbiAgICApLCBmYWxzZVxuXG4gICAgY2IoKVxuXG4gIGluaXRPYmplY3RzOiAoY2IpID0+XG4gICAgVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUgQHVybHMsIG51bGwsICh0ZXh0dXJlKSA9PlxuICAgICAgIyBpbml0IHRoZSBjdWJlIHNoYWRkZXJcbiAgICAgIHNoYWRlciA9IFRIUkVFLlNoYWRlckxpYlsnY3ViZSddXG5cbiAgICAgICMgU2V0dXAgdGhlIHVuaWZvcm1cbiAgICAgIHVuaWZvcm1zID0gVEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShzaGFkZXIudW5pZm9ybXMpXG4gICAgICB1bmlmb3Jtc1sndEN1YmUnXS52YWx1ZSA9IHRleHR1cmVcblxuICAgICAgIyBjYW1lcmF0ZSB0aGUgbWF0ZXJpYWxcbiAgICAgIG1hdGVyaWFsID0gbmV3IChUSFJFRS5TaGFkZXJNYXRlcmlhbCkoXG4gICAgICAgIGZyYWdtZW50U2hhZGVyOiBzaGFkZXIuZnJhZ21lbnRTaGFkZXJcbiAgICAgICAgdmVydGV4U2hhZGVyOiBzaGFkZXIudmVydGV4U2hhZGVyXG4gICAgICAgIHVuaWZvcm1zOiB1bmlmb3Jtc1xuICAgICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZSlcblxuICAgICAgIyBHZW5lcmF0ZSBhIHNwaGVyZSBnZW9tZXRyeVxuICAgICAgbWVzaEdlb21ldHJ5ID0gbmV3IChUSFJFRS5TcGhlcmVHZW9tZXRyeSkoVGhyZWVTaXh0eTo6U2NhbGUsIDMyLCAzMilcblxuICAgICAgIyBidWlsZCB0aGUgc2t5Ym94IE1lc2ggdXNpbmcgdGhlIHRleHR1cmUgY3ViZVxuICAgICAgc2t5Qm94ID0gbmV3IChUSFJFRS5NZXNoKShtZXNoR2VvbWV0cnksIG1hdGVyaWFsKVxuXG4gICAgICAjIEFkZCBtYXBwaW5nIHdpcmVmcmFtZVxuXG4gICAgICAjIG1hdGVyaWFsLndpcmVmcmFtZSA9IHRydWVcblxuICAgICAgIyBhZGQgYm94XG4gICAgICBhZGRCb3ggPSAoKCkgPT5cbiAgICAgICAgZCA9IE1hdGguc3FydCgyICogVGhyZWVTaXh0eTo6U2NhbGUgKiBUaHJlZVNpeHR5OjpTY2FsZSlcbiAgICAgICAgZ2VvbWV0cnkgPSBuZXcgKFRIUkVFLkJveEdlb21ldHJ5KSggZCwgZCwgZCApXG5cbiAgICAgICAgbWF0ZXJpYWwgPSBuZXcgKFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKSggeyBjb2xvcjogMHgwMGZmMDAgfSApXG4gICAgICAgIG1hdGVyaWFsLndpcmVmcmFtZSA9IHRydWVcblxuICAgICAgICBjdWJlID0gbmV3IChUSFJFRS5NZXNoKSggZ2VvbWV0cnksIG1hdGVyaWFsIClcblxuICAgICAgICBjdWJlLnBvc2l0aW9uLnggPSAwXG4gICAgICAgIGN1YmUucG9zaXRpb24ueSA9IDBcbiAgICAgICAgY3ViZS5wb3NpdGlvbi56ID0gMFxuXG4gICAgICAgIEBzY2VuZS5hZGQgY3ViZVxuICAgICAgKVxuXG4gICAgICAjIGFkZEJveCgpXG5cbiAgICAgICMgIyBBZGQgY29uZVxuICAgICAgIyBhZGRDb25lID0gKCgpID0+XG4gICAgICAjICAgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQ3lsaW5kZXJHZW9tZXRyeSggMCwgVGhyZWVTaXh0eTo6U2NhbGUvMTAsIFRocmVlU2l4dHk6OlNjYWxlLzUsIDMyIClcbiAgICAgICMgICAjIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKCB7Y29sb3I6IDB4ZmZmZjAwfSApXG4gICAgICAjICAgIyBjYW1lcmF0ZSB0aGUgbWF0ZXJpYWxcbiAgICAgICMgICBtYXRlcmlhbCA9IG5ldyAoVEhSRUUuU2hhZGVyTWF0ZXJpYWwpKFxuICAgICAgIyAgICAgZnJhZ21lbnRTaGFkZXI6IHNoYWRlci5mcmFnbWVudFNoYWRlclxuICAgICAgIyAgICAgdmVydGV4U2hhZGVyOiBzaGFkZXIudmVydGV4U2hhZGVyXG4gICAgICAjICAgICB1bmlmb3JtczogdW5pZm9ybXNcbiAgICAgICMgICAgIHNpZGU6IFRIUkVFLkJhY2tTaWRlKVxuICAgICAgI1xuICAgICAgIyAgIEBhcnJvd0hlbHBlciA9IG5ldyBUSFJFRS5NZXNoKCBnZW9tZXRyeSwgbWF0ZXJpYWwgKVxuICAgICAgI1xuICAgICAgIyAgIEBhcnJvd0hlbHBlci5yb3RhdGlvbi54ID0gTWF0aC5QSS8yXG4gICAgICAjXG4gICAgICAjICAgIyBmaXggcm90YXRpb25cbiAgICAgICMgICBAYXJyb3dIZWxwZXIucm90YXRpb24ub3JkZXIgPSAnWVhaJ1xuICAgICAgI1xuICAgICAgIyAgIEBwYXJlbnRPYmplY3QuYWRkIEBhcnJvd0hlbHBlclxuICAgICAgIyApXG4gICAgICAjXG4gICAgICAjIGFkZENvbmUoKVxuXG4gICAgICAjIGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lXG4gICAgICBAc2NlbmUuYWRkIHNreUJveFxuXG4gICAgICBjYigpXG5cbiAgaW5pdFJlbmRlcmVyOiAoY2IpID0+XG4gICAgQHJlbmRlcmVyID0gbmV3IChUSFJFRS5XZWJHTFJlbmRlcmVyKSgpXG4gICAgQHJlbmRlcmVyLnNldFNpemUgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodFxuICAgIEBib3guYXBwZW5kQ2hpbGQgQHJlbmRlcmVyLmRvbUVsZW1lbnRcblxuICAgIGNiKClcblxuICBpbml0Q29udHJvbHM6IChjYikgPT5cbiAgICAjIEtleWJvYXJkIHNob3J0Y3V0c1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2tleWRvd24nLCBAZXZlbnRPbktleURvd24sIGZhbHNlXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5dXAnLCBAZXZlbnRPbktleVVwLCBmYWxzZVxuXG4gICAgIyBNb3VzZSBkcmFnZ2luZ1xuICAgIEByZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ21vdXNlZG93bicsIEBldmVudE1vdXNlRG93biwgZmFsc2VcbiAgICBAcmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyICdtb3VzZW1vdmUnLCBAZXZlbnRNb3VzZU1vdmUsIGZhbHNlXG4gICAgQHJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAnbW91c2V1cCcsIEBldmVudE1vdXNlVXAsIGZhbHNlXG4gICAgQHJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAnbW91c2VvdXQnLCBAZXZlbnRNb3VzZVVwLCBmYWxzZVxuXG4gICAgbWFwQ29udHJvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsICdbZGF0YS1tYXAtY29udHJvbF0nXG5cbiAgICBmb3IgbWFwQ29udHJvbCBpbiBtYXBDb250cm9sc1xuICAgICAgZG8gKG1hcENvbnRyb2wpID0+XG4gICAgICAgIGRpcmVjdGlvbiA9IG1hcENvbnRyb2wuZGF0YXNldC5tYXBDb250cm9sXG5cbiAgICAgICAgbWFwQ29udHJvbC5hZGRFdmVudExpc3RlbmVyICdjbGljaycsIChlKSA9PlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgQGV2ZW50RG9Eb21Db250cm9sIGRpcmVjdGlvblxuXG4gICAgICAgICAgcmV0dXJuXG5cbiAgICBjYigpXG5cbiAgZXZlbnREb0RvbUNvbnRyb2w6IChvcGVyYXRpb24pID0+XG4gICAgQHBhblRvLnRpbWUuc3RhcnQgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpXG4gICAgQHBhblRvLnRpbWUuZW5kID0gQHBhblRvLnRpbWUuc3RhcnQgKyA3MDBcblxuICAgICMgZ2V0IHRoZSBjdXJyZW50IGNhbWVyYSByb3RhdGlvblxuICAgIGZyb21Sb3RhdGlvbiA9IEBwYXJlbnRPYmplY3Qucm90YXRpb24uY2xvbmUoKVxuXG4gICAgQHBhblRvLmZyb20ucm90YXRpb24gPSBmcm9tUm90YXRpb25cbiAgICBAcGFuVG8udG8ucm90YXRpb24gPSBmcm9tUm90YXRpb24uY2xvbmUoKVxuXG4gICAgQHBhblRvLmZyb20ucG9zaXRpb24gPSBAc2VsZWN0ZWRPYmplY3QucG9zaXRpb24uelxuICAgIEBwYW5Uby50by5wb3NpdGlvbiA9IEBwYW5Uby5mcm9tLnBvc2l0aW9uXG5cbiAgICBzd2l0Y2ggb3BlcmF0aW9uXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OkxFRlRcbiAgICAgICAgIyBtb3ZlIHVzIFBJLzIgaW4gdGhlICtZIGRpcmVjdGlvblxuICAgICAgICBAcGFuVG8udG8ucm90YXRpb24ueSA9IEBwYW5Uby5mcm9tLnJvdGF0aW9uLnkgKyBNYXRoLlBJLzJcbiAgICAgIHdoZW4gVGhyZWVTaXh0eTo6UklHSFRcbiAgICAgICAgIyBtb3ZlIHVzIFBJLzIgaW4gdGhlIC1ZIGRpcmVjdGlvblxuICAgICAgICBAcGFuVG8udG8ucm90YXRpb24ueSA9IEBwYW5Uby5mcm9tLnJvdGF0aW9uLnkgLSBNYXRoLlBJLzJcbiAgICAgIHdoZW4gVGhyZWVTaXh0eTo6SU5cbiAgICAgICAgQHBhblRvLnRvLnBvc2l0aW9uIC09IDFcbiAgICAgIHdoZW4gVGhyZWVTaXh0eTo6T1VUXG4gICAgICAgIEBwYW5Uby50by5wb3NpdGlvbiArPSAxXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OlJFU0VUXG4gICAgICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueSA9IEBwYXJlbnRPYmplY3Qucm90YXRpb24ueSAlICgyICogTWF0aC5QSSlcblxuICAgICAgICBAcGFuVG8udG8ucm90YXRpb24ueCA9IDBcbiAgICAgICAgQHBhblRvLnRvLnJvdGF0aW9uLnkgPSAwXG4gICAgICAgIEBwYW5Uby50by5wb3NpdGlvbiA9IDBcbiAgICAgIGVsc2VcbiAgICAgICAgY29uc29sZS5sb2cgXCJjYW4ndCBkbyAje29wZXJhdGlvbn1cIlxuICAgICAgICByZXR1cm5cblxuICAgIEBwYW5Uby50by5wb3NpdGlvbiA9IEBjbGFtcFBvc2l0aW9uKEBwYW5Uby50by5wb3NpdGlvbilcbiAgICBAY2xhbXBSb3RhdGlvbihAcGFuVG8udG8pXG5cbiAgICAjIG1hcmsgdGhlIHBhbm5pbmcgYXMgYWN0aXZlXG4gICAgQHBhblRvLmFjdGl2ZSA9IHRydWVcblxuICAgICMgYmVnaW4gdGhlIHJlbmRlclxuICAgIEBzdGFydFJlbmRlcigpXG5cbiAgICByZXR1cm5cblxuICBldmVudE9uS2V5RG93bjogKGUpID0+XG4gICAgIyBHZXQgdGhlIGRpcmVjdGlvblxuICAgIGRpciA9IEBnZXREaXJlY3Rpb24gZS5rZXlDb2RlXG5cbiAgICAjIElmIHRoaXMgaXMgYSBkaXJlY3Rpb24ga2V5Li4uXG4gICAgaWYgZGlyP1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICAgICMgUGVyZm9ybSBpdCdzIGFjdGlvblxuICAgICAgQGJlZ2luS2V5UHJlc3MgZGlyXG5cbiAgICAgICMgQW5kIGZpbmlzaFxuICAgICAgcmV0dXJuXG5cbiAgZXZlbnRPbktleVVwOiAoZSkgPT5cbiAgICAjIEdldCB0aGUgZGlyZWN0aW9uXG4gICAgZGlyID0gQGdldERpcmVjdGlvbiBlLmtleUNvZGVcblxuICAgICMgSWYgdGhpcyBpcyBhIGRpcmVjdGlvbiBrZXkuLi5cbiAgICBpZiBkaXI/XG4gICAgICAjIFBlcmZvcm0gaXQncyBhY3Rpb25cbiAgICAgIEBlbmRLZXlQcmVzcyBkaXJcblxuICAgICAgIyBBbmQgZmluaXNoXG4gICAgICByZXR1cm5cblxuICBldmVudE1vdXNlRG93bjogKCkgPT5cbiAgICByZXR1cm5cblxuICBldmVudE1vdXNlTW92ZTogKGUpID0+XG4gICAgcmV0dXJuXG5cbiAgZXZlbnRNb3VzZVVwOiAoKSA9PlxuICAgIHJldHVyblxuXG4gIGVuZEtleVByZXNzOiAoZGlyZWN0aW9uKSA9PlxuICAgICMgSWYgd2UgYXJlbid0IHRyYWNraW5nIGl0XG4gICAgQGRpcmVjdGlvbnNbZGlyZWN0aW9uXSA9IGZhbHNlIGlmIEBkaXJlY3Rpb25zW2RpcmVjdGlvbl1cblxuICBiZWdpbktleVByZXNzOiAoZGlyZWN0aW9uKSA9PlxuICAgICMgSWYgd2UgYWxyZWFkeSBhcmUgbWFuYWdpbmcgdGhpcyBkaXJlY3Rpb25cbiAgICBpZiBAZGlyZWN0aW9uc1tkaXJlY3Rpb25dXG4gICAgICAjIFRoZW4ganVzdCByZXR1cm5cbiAgICAgIHJldHVyblxuXG4gICAgIyBPdGhlcndpc2Ugc2V0IGl0IHRvIHRydWVcbiAgICBAZGlyZWN0aW9uc1tkaXJlY3Rpb25dID0gdHJ1ZVxuXG4gICAgQHN0YXJ0UmVuZGVyKClcblxuICBnZXREaXJlY3Rpb246IChrZXkpID0+XG4gICAgc3dpdGNoIGtleVxuICAgICAgd2hlbiAzNywgNjUgdGhlbiBUaHJlZVNpeHR5OjpMRUZUXG4gICAgICB3aGVuIDM4LCA4NyB0aGVuIFRocmVlU2l4dHk6OlVQXG4gICAgICB3aGVuIDM5LCA2OCB0aGVuIFRocmVlU2l4dHk6OlJJR0hUXG4gICAgICB3aGVuIDQwLCA4MyB0aGVuIFRocmVlU2l4dHk6OkRPV05cbiAgICAgIHdoZW4gMTg3IHRoZW4gVGhyZWVTaXh0eTo6SU5cbiAgICAgIHdoZW4gMTg5IHRoZW4gVGhyZWVTaXh0eTo6T1VUXG4gICAgICB3aGVuIDY3IHRoZW4gVGhyZWVTaXh0eTo6Q0FNRVJBX01PREVcbiAgICAgIHdoZW4gODYgdGhlbiBUaHJlZVNpeHR5OjpBUlJPV19NT0RFXG4gICAgICBlbHNlXG4gICAgICAgIGNvbnNvbGUuZXJyb3IgXCJkaXJlY3Rpb24gbm90IGtub3duOiAje2tleX1cIlxuICAgICAgICBmYWxzZVxuXG4gIG1vdmU6IChkaXJlY3Rpb24pID0+XG4gICAgc3dpdGNoIGRpcmVjdGlvblxuICAgICAgd2hlbiBUaHJlZVNpeHR5OjpMRUZUXG4gICAgICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueSArPSBNYXRoLlBJIC8gMjAwXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OlVQXG4gICAgICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueCArPSBNYXRoLlBJIC8gMjAwXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OlJJR0hUXG4gICAgICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueSAtPSBNYXRoLlBJIC8gMjAwXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OkRPV05cbiAgICAgICAgQHBhcmVudE9iamVjdC5yb3RhdGlvbi54IC09IE1hdGguUEkgLyAyMDBcbiAgICAgIHdoZW4gVGhyZWVTaXh0eTo6SU5cbiAgICAgICAgQHNlbGVjdGVkT2JqZWN0LnBvc2l0aW9uLnogKz0gVGhyZWVTaXh0eTo6U2NhbGUgLyAtMTAwXG4gICAgICB3aGVuIFRocmVlU2l4dHk6Ok9VVFxuICAgICAgICBAc2VsZWN0ZWRPYmplY3QucG9zaXRpb24ueiArPSBUaHJlZVNpeHR5OjpTY2FsZSAvIDEwMFxuICAgICAgZWxzZSBudWxsXG5cbiAgICBAc2VsZWN0ZWRPYmplY3QucG9zaXRpb24ueiA9IEBjbGFtcFBvc2l0aW9uKEBzZWxlY3RlZE9iamVjdC5wb3NpdGlvbi56KVxuICAgIEBjbGFtcFJvdGF0aW9uKEBwYXJlbnRPYmplY3QpXG5cbiAgICByZXR1cm5cblxuICBjbGFtcFBvc2l0aW9uOiAocG9zaXRpb24pID0+XG4gICAgaWYgcG9zaXRpb24gPCBUaHJlZVNpeHR5OjpTY2FsZSAqIC0wLjRcbiAgICAgIFRocmVlU2l4dHk6OlNjYWxlICogLTAuNFxuICAgIGVsc2UgaWYgcG9zaXRpb24gPiAwXG4gICAgICAwXG4gICAgZWxzZVxuICAgICAgcG9zaXRpb25cblxuICBjbGFtcFJvdGF0aW9uOiAob2JqZWN0KSA9PlxuICAgIGlmIG9iamVjdC5yb3RhdGlvbi54ID4gVGhyZWVTaXh0eTo6TWF4Um90YXRpb25cbiAgICAgIG9iamVjdC5yb3RhdGlvbi54ID0gVGhyZWVTaXh0eTo6TWF4Um90YXRpb25cblxuICAgIGlmIG9iamVjdC5yb3RhdGlvbi54IDwgLVRocmVlU2l4dHk6Ok1heFJvdGF0aW9uXG4gICAgICBvYmplY3Qucm90YXRpb24ueCA9IC1UaHJlZVNpeHR5OjpNYXhSb3RhdGlvblxuXG4gICAgcmV0dXJuXG5cbiAgc3RhcnRSZW5kZXI6ID0+XG4gICAgIyBJZiBpdCBpcyBub3QgcmVuZGVyaW5nLi4uXG4gICAgaWYgIUBpc1JlbmRlcmluZ1xuXG4gICAgICAjIFRoZW4gbWFyayBpdCBhcyByZW5kZXJpbmdcbiAgICAgIEBpc1JlbmRlcmluZyA9IHRydWVcblxuICAgICAgIyBBbmQgc3RhcnQgdGhlIHJlbmRlclxuICAgICAgQHJlbmRlcigpXG5cbiAgICByZXR1cm5cblxuICBwcm9jZXNzUGFuVG86ICgpID0+XG4gICAgVGMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpXG5cbiAgICBpZiBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnkgIT0gQHBhblRvLnRvLnJvdGF0aW9uLnlcbiAgICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueSA9IEBxdWFkcmF0aWNFYXNlSW5FYXNlT3V0KFRjLCBAcGFuVG8udG8ucm90YXRpb24ueSwgQHBhblRvLmZyb20ucm90YXRpb24ueSlcblxuICAgIGlmIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueCAhPSBAcGFuVG8udG8ucm90YXRpb24ueFxuICAgICAgQHBhcmVudE9iamVjdC5yb3RhdGlvbi54ID0gQHF1YWRyYXRpY0Vhc2VJbkVhc2VPdXQoVGMsIEBwYW5Uby50by5yb3RhdGlvbi54LCBAcGFuVG8uZnJvbS5yb3RhdGlvbi54KVxuXG4gICAgaWYgQHNlbGVjdGVkT2JqZWN0LnBvc2l0aW9uLnogIT0gQHBhblRvLnRvLnBvc2l0aW9uXG4gICAgICBAc2VsZWN0ZWRPYmplY3QucG9zaXRpb24ueiA9IEBxdWFkcmF0aWNFYXNlSW5FYXNlT3V0KFRjLCBAcGFuVG8udG8ucG9zaXRpb24sIEBwYW5Uby5mcm9tLnBvc2l0aW9uKVxuXG4gICAgaWYgVGMgPj0gQHBhblRvLnRpbWUuZW5kXG4gICAgICBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnkgPSBAcGFuVG8udG8ucm90YXRpb24ueVxuICAgICAgQHBhcmVudE9iamVjdC5yb3RhdGlvbi54ID0gQHBhblRvLnRvLnJvdGF0aW9uLnhcbiAgICAgIEBzZWxlY3RlZE9iamVjdC5wb3NpdGlvbi56ID0gQHBhblRvLnRvLnBvc2l0aW9uXG5cbiAgICAgICMgc3RvcCBwYW5uaW5nXG4gICAgICBAcGFuVG8uYWN0aXZlID0gZmFsc2VcblxuICAgIHJldHVyblxuXG4gIHF1YWRyYXRpY0Vhc2VJbkVhc2VPdXQ6IChUYywgRywgQikgPT5cbiAgICAjIGNvbXB1dGUgdGltZVxuICAgIHQgPSAyICogKFRjIC0gQHBhblRvLnRpbWUuc3RhcnQpIC8gKEBwYW5Uby50aW1lLmVuZCAtIEBwYW5Uby50aW1lLnN0YXJ0KVxuXG4gICAgaWYgdCA8IDFcbiAgICAgIHJldHVybiAoKEcgLSBCKS8yKSAqIHQgKiB0ICsgQlxuICAgIGVsc2VcbiAgICAgIHQgPSB0IC0gMVxuICAgICAgcmV0dXJuICgoQiAtIEcpLzIpICogKHQgKiAodCAtIDIpIC0gMSkgKyBCXG5cbiAgcHJvY2Vzc01vdmVtZW50czogKCkgPT5cbiAgICBfLm1hcCBAZGlyZWN0aW9ucywgKGVuYWJsZWQsIGRpcmVjdGlvbikgPT5cbiAgICAgIEBtb3ZlIGRpcmVjdGlvbiBpZiBlbmFibGVkXG5cbiAgICBpZiBAcGFuVG8uYWN0aXZlXG4gICAgICBAcHJvY2Vzc1BhblRvKClcblxuICAgICMgYWRqdXN0IHRoZSByb3RhdGlvbiBvZiB0aGUgY29tcGFzcyBuZWVkbGVcbiAgICByb3RhdGlvblN0cmluZyA9IFwicm90YXRlKCN7QHBhcmVudE9iamVjdC5yb3RhdGlvbi55fXJhZClcIlxuICAgIEBjb21wYXNzTmVlZGxlLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHJvdGF0aW9uU3RyaW5nXG4gICAgQGNvbXBhc3NOZWVkbGUuc3R5bGUudHJhbnNmb3JtID0gcm90YXRpb25TdHJpbmdcblxuICAgIHJldHVyblxuXG4gIHNob3VsZFJlcmVuZGVyOiA9PlxuICAgICMgSWYgdGhlcmUgYXJlIHNvbWUgZGlyZWN0aW9ucyBhY3RpdmUuLi5cbiAgICBAbW91c2UucGFubmluZyBvciBfLnNvbWUoQGRpcmVjdGlvbnMpIG9yIEBwYW5Uby5hY3RpdmVcblxuICBkb1JlbmRlcjogLT5cbiAgICAjIFJlbmRlciB0aGUgc2NlbmVcbiAgICBAcmVuZGVyZXIucmVuZGVyIEBzY2VuZSwgQGNhbWVyYVxuXG4gIHJlbmRlcjogPT5cbiAgICBpZiBAc2hvdWxkUmVyZW5kZXIoKVxuICAgICAgIyBSZXF1ZXN0IHRoZSBhbmltYXRpb24gdG8gcmVwZWF0IG9uY2UgbW9yZVxuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIFRocmVlU2l4dHk6OnJlbmRlci5iaW5kKHRoaXMpXG5cbiAgICAgICMgUHJvY2VzcyBhbGwgdGhlIG1vdmVtZW50c1xuICAgICAgQHByb2Nlc3NNb3ZlbWVudHMoKVxuXG4gICAgICAjIERvIHRoZSByZW5kZXJcbiAgICAgIEBkb1JlbmRlcigpXG5cbiAgICBlbHNlXG4gICAgICAjIEZpbmlzaGVkIHJlbmRlcmluZ1xuICAgICAgQGlzUmVuZGVyaW5nID0gZmFsc2VcblxuICAgIHJldHVyblxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICdET01Db250ZW50TG9hZGVkJywgLT5cbiAgdHMgPSBuZXcgVGhyZWVTaXh0eSBkb2N1bWVudC5ib2R5LCBbXG4gICAgJ2ltYWdlcy95b2tvaGFtYS9wb3MteC5qcGcnLFxuICAgICdpbWFnZXMveW9rb2hhbWEvbmVnLXguanBnJyxcbiAgICAnaW1hZ2VzL3lva29oYW1hL3Bvcy15LmpwZycsXG4gICAgJ2ltYWdlcy95b2tvaGFtYS9uZWcteS5qcGcnLFxuICAgICdpbWFnZXMveW9rb2hhbWEvcG9zLXouanBnJyxcbiAgICAnaW1hZ2VzL3lva29oYW1hL25lZy16LmpwZydcbiAgXVxuXG4gIHRzLnN0YXJ0KClcblxuICByZXR1cm5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==