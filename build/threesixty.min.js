var ThreeSixty,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

ThreeSixty = (function() {
  ThreeSixty.prototype.Scale = 10;

  ThreeSixty.prototype.MaxRotation = Math.PI / 4;

  ThreeSixty.prototype.LEFT = 'left';

  ThreeSixty.prototype.RIGHT = 'right';

  ThreeSixty.prototype.UP = 'up';

  ThreeSixty.prototype.DOWN = 'down';

  ThreeSixty.prototype.IN = 'in';

  ThreeSixty.prototype.OUT = 'out';

  ThreeSixty.prototype.RESET = 'reset';

  ThreeSixty.prototype.CAMERA_MODE = 'camera_mode';

  ThreeSixty.prototype.ARROW_MODE = 'arrow_mode';

  function ThreeSixty(box, urls) {
    this.render = bind(this.render, this);
    this.shouldRerender = bind(this.shouldRerender, this);
    this.processMovements = bind(this.processMovements, this);
    this.quadraticEaseInEaseOut = bind(this.quadraticEaseInEaseOut, this);
    this.processPanTo = bind(this.processPanTo, this);
    this.startRender = bind(this.startRender, this);
    this.clampRotation = bind(this.clampRotation, this);
    this.clampPosition = bind(this.clampPosition, this);
    this.move = bind(this.move, this);
    this.getDirection = bind(this.getDirection, this);
    this.beginKeyPress = bind(this.beginKeyPress, this);
    this.endKeyPress = bind(this.endKeyPress, this);
    this.eventMouseUp = bind(this.eventMouseUp, this);
    this.eventMouseMove = bind(this.eventMouseMove, this);
    this.eventMouseDown = bind(this.eventMouseDown, this);
    this.eventOnKeyUp = bind(this.eventOnKeyUp, this);
    this.eventOnKeyDown = bind(this.eventOnKeyDown, this);
    this.eventDoDomControl = bind(this.eventDoDomControl, this);
    this.initControls = bind(this.initControls, this);
    this.initRenderer = bind(this.initRenderer, this);
    this.initObjects = bind(this.initObjects, this);
    this.initScene = bind(this.initScene, this);
    this.urls = urls;
    this.box = box;
    this.directions = {};
    this.mouse = {
      active: false,
      panning: false,
      speed: {
        x: 0,
        y: 0,
        z: 0
      }
    };
    this.panTo = {
      active: false,
      time: {
        start: 0,
        end: 0
      },
      from: {
        rotation: {
          x: 0,
          y: 0,
          z: 0
        }
      },
      to: {
        rotation: {
          x: 0,
          y: 0,
          z: 0
        }
      }
    };
    this.isRendering = false;
    this.compassNeedle = document.getElementById('compass-direction-icon');
  }

  ThreeSixty.prototype.start = function() {
    this.initScene((function(_this) {
      return function() {
        _this.initObjects(function() {
          _this.initRenderer(function() {
            _this.initControls(function() {
              _this.doRender();
            });
          });
        });
      };
    })(this));
  };

  ThreeSixty.prototype.initScene = function(cb) {
    this.scene = new THREE.Scene;
    this.camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, ThreeSixty.prototype.Scale * 10);
    this.parentObject = new THREE.Object3D();
    this.parentObject.rotation.order = 'YXZ';
    this.scene.add(this.parentObject);
    this.parentObject.add(this.camera);
    this.camera.rotation.order = 'YXZ';
    window.addEventListener('resize', ((function(_this) {
      return function() {
        _this.camera.aspect = window.innerWidth / window.innerHeight;
        _this.camera.updateProjectionMatrix();
        _this.renderer.setSize(window.innerWidth, window.innerHeight);
        _this.doRender();
      };
    })(this)), false);
    return cb();
  };

  ThreeSixty.prototype.initObjects = function(cb) {
    return THREE.ImageUtils.loadTextureCube(this.urls, null, (function(_this) {
      return function(texture) {
        var material, meshGeometry, shader, skyBox, uniforms;
        shader = THREE.ShaderLib['cube'];
        uniforms = THREE.UniformsUtils.clone(shader.uniforms);
        uniforms['tCube'].value = texture;
        material = new THREE.ShaderMaterial({
          fragmentShader: shader.fragmentShader,
          vertexShader: shader.vertexShader,
          uniforms: uniforms,
          side: THREE.BackSide
        });
        meshGeometry = new THREE.SphereGeometry(ThreeSixty.prototype.Scale, 32, 32);
        skyBox = new THREE.Mesh(meshGeometry, material);
        _this.scene.add(skyBox);
        return cb();
      };
    })(this));
  };

  ThreeSixty.prototype.initRenderer = function(cb) {
    this.renderer = new THREE.WebGLRenderer();
    this.renderer.setSize(window.innerWidth, window.innerHeight);
    this.box.appendChild(this.renderer.domElement);
    return cb();
  };

  ThreeSixty.prototype.initControls = function(cb) {
    var fn, i, len, mapControl, mapControls;
    document.addEventListener('keydown', this.eventOnKeyDown, false);
    document.addEventListener('keyup', this.eventOnKeyUp, false);
    this.renderer.domElement.addEventListener('mousedown', this.eventMouseDown, false);
    this.renderer.domElement.addEventListener('mousemove', this.eventMouseMove, false);
    this.renderer.domElement.addEventListener('mouseup', this.eventMouseUp, false);
    this.renderer.domElement.addEventListener('mouseout', this.eventMouseUp, false);
    mapControls = document.querySelectorAll('[data-map-control]');
    fn = (function(_this) {
      return function(mapControl) {
        var direction;
        direction = mapControl.dataset.mapControl;
        return mapControl.addEventListener('click', function(e) {
          e.preventDefault();
          _this.eventDoDomControl(direction);
        });
      };
    })(this);
    for (i = 0, len = mapControls.length; i < len; i++) {
      mapControl = mapControls[i];
      fn(mapControl);
    }
    return cb();
  };

  ThreeSixty.prototype.eventDoDomControl = function(operation) {
    var fromRotation;
    this.panTo.time.start = (new Date()).getTime();
    this.panTo.time.end = this.panTo.time.start + 700;
    fromRotation = this.parentObject.rotation.clone();
    this.panTo.from.rotation = fromRotation;
    this.panTo.to.rotation = fromRotation.clone();
    this.panTo.from.position = this.camera.position.z;
    this.panTo.to.position = this.panTo.from.position;
    switch (operation) {
      case ThreeSixty.prototype.LEFT:
        this.panTo.to.rotation.y = this.panTo.from.rotation.y + Math.PI / 2;
        break;
      case ThreeSixty.prototype.RIGHT:
        this.panTo.to.rotation.y = this.panTo.from.rotation.y - Math.PI / 2;
        break;
      case ThreeSixty.prototype.IN:
        this.panTo.to.position -= 1;
        break;
      case ThreeSixty.prototype.OUT:
        this.panTo.to.position += 1;
        break;
      case ThreeSixty.prototype.RESET:
        this.parentObject.rotation.y = this.parentObject.rotation.y % (2 * Math.PI);
        this.panTo.to.rotation.x = 0;
        this.panTo.to.rotation.y = 0;
        this.panTo.to.position = 0;
        break;
      default:
        console.log("can't do " + operation);
        return;
    }
    this.panTo.to.position = this.clampPosition(this.panTo.to.position);
    this.clampRotation(this.panTo.to);
    this.panTo.active = true;
    this.startRender();
  };

  ThreeSixty.prototype.eventOnKeyDown = function(e) {
    var dir;
    dir = this.getDirection(e.keyCode);
    if (dir != null) {
      e.preventDefault();
      this.beginKeyPress(dir);
    }
  };

  ThreeSixty.prototype.eventOnKeyUp = function(e) {
    var dir;
    dir = this.getDirection(e.keyCode);
    if (dir != null) {
      this.endKeyPress(dir);
    }
  };

  ThreeSixty.prototype.eventMouseDown = function() {};

  ThreeSixty.prototype.eventMouseMove = function(e) {};

  ThreeSixty.prototype.eventMouseUp = function() {};

  ThreeSixty.prototype.endKeyPress = function(direction) {
    if (this.directions[direction]) {
      return this.directions[direction] = false;
    }
  };

  ThreeSixty.prototype.beginKeyPress = function(direction) {
    if (this.directions[direction]) {
      return;
    }
    this.directions[direction] = true;
    return this.startRender();
  };

  ThreeSixty.prototype.getDirection = function(key) {
    switch (key) {
      case 37:
      case 65:
        return ThreeSixty.prototype.LEFT;
      case 38:
      case 87:
        return ThreeSixty.prototype.UP;
      case 39:
      case 68:
        return ThreeSixty.prototype.RIGHT;
      case 40:
      case 83:
        return ThreeSixty.prototype.DOWN;
      case 187:
        return ThreeSixty.prototype.IN;
      case 189:
        return ThreeSixty.prototype.OUT;
      case 67:
        return ThreeSixty.prototype.CAMERA_MODE;
      case 86:
        return ThreeSixty.prototype.ARROW_MODE;
      default:
        console.error("direction not known: " + key);
        return false;
    }
  };

  ThreeSixty.prototype.move = function(direction) {
    switch (direction) {
      case ThreeSixty.prototype.LEFT:
        this.parentObject.rotation.y += Math.PI / 200;
        break;
      case ThreeSixty.prototype.UP:
        this.parentObject.rotation.x += Math.PI / 200;
        break;
      case ThreeSixty.prototype.RIGHT:
        this.parentObject.rotation.y -= Math.PI / 200;
        break;
      case ThreeSixty.prototype.DOWN:
        this.parentObject.rotation.x -= Math.PI / 200;
        break;
      case ThreeSixty.prototype.IN:
        this.camera.position.z += ThreeSixty.prototype.Scale / -100;
        break;
      case ThreeSixty.prototype.OUT:
        this.camera.position.z += ThreeSixty.prototype.Scale / 100;
        break;
      default:
        null;
    }
    this.camera.position.z = this.clampPosition(this.camera.position.z);
    this.clampRotation(this.parentObject);
  };

  ThreeSixty.prototype.clampPosition = function(position) {
    if (position < ThreeSixty.prototype.Scale * -0.4) {
      return ThreeSixty.prototype.Scale * -0.4;
    } else if (position > 0) {
      return 0;
    } else {
      return position;
    }
  };

  ThreeSixty.prototype.clampRotation = function(object) {
    if (object.rotation.x > ThreeSixty.prototype.MaxRotation) {
      object.rotation.x = ThreeSixty.prototype.MaxRotation;
    }
    if (object.rotation.x < -ThreeSixty.prototype.MaxRotation) {
      object.rotation.x = -ThreeSixty.prototype.MaxRotation;
    }
  };

  ThreeSixty.prototype.startRender = function() {
    if (!this.isRendering) {
      this.isRendering = true;
      this.render();
    }
  };

  ThreeSixty.prototype.processPanTo = function() {
    var Tc;
    Tc = (new Date()).getTime();
    if (this.parentObject.rotation.y !== this.panTo.to.rotation.y) {
      this.parentObject.rotation.y = this.quadraticEaseInEaseOut(Tc, this.panTo.to.rotation.y, this.panTo.from.rotation.y);
    }
    if (this.parentObject.rotation.x !== this.panTo.to.rotation.x) {
      this.parentObject.rotation.x = this.quadraticEaseInEaseOut(Tc, this.panTo.to.rotation.x, this.panTo.from.rotation.x);
    }
    if (this.camera.position.z !== this.panTo.to.position) {
      this.camera.position.z = this.quadraticEaseInEaseOut(Tc, this.panTo.to.position, this.panTo.from.position);
    }
    if (Tc >= this.panTo.time.end) {
      this.parentObject.rotation.y = this.panTo.to.rotation.y;
      this.parentObject.rotation.x = this.panTo.to.rotation.x;
      this.camera.position.z = this.panTo.to.position;
      this.panTo.active = false;
    }
  };

  ThreeSixty.prototype.quadraticEaseInEaseOut = function(Tc, G, B) {
    var t;
    t = 2 * (Tc - this.panTo.time.start) / (this.panTo.time.end - this.panTo.time.start);
    if (t < 1) {
      return ((G - B) / 2) * t * t + B;
    } else {
      t = t - 1;
      return ((B - G) / 2) * (t * (t - 2) - 1) + B;
    }
  };

  ThreeSixty.prototype.processMovements = function() {
    var rotationString;
    _.map(this.directions, (function(_this) {
      return function(enabled, direction) {
        if (enabled) {
          return _this.move(direction);
        }
      };
    })(this));
    if (this.panTo.active) {
      this.processPanTo();
    }
    rotationString = "rotate(" + this.parentObject.rotation.y + "rad)";
    this.compassNeedle.style.webkitTransform = rotationString;
    this.compassNeedle.style.transform = rotationString;
  };

  ThreeSixty.prototype.shouldRerender = function() {
    return this.mouse.panning || _.some(this.directions) || this.panTo.active;
  };

  ThreeSixty.prototype.doRender = function() {
    return this.renderer.render(this.scene, this.camera);
  };

  ThreeSixty.prototype.render = function() {
    if (this.shouldRerender()) {
      requestAnimationFrame(ThreeSixty.prototype.render.bind(this));
      this.processMovements();
      this.doRender();
    } else {
      this.isRendering = false;
    }
  };

  return ThreeSixty;

})();

document.addEventListener('DOMContentLoaded', function() {
  var ts;
  ts = new ThreeSixty(document.body, ['images/yokohama/pos-x.jpg', 'images/yokohama/neg-x.jpg', 'images/yokohama/pos-y.jpg', 'images/yokohama/neg-y.jpg', 'images/yokohama/pos-z.jpg', 'images/yokohama/neg-z.jpg']);
  ts.start();
});

//# sourceMappingURL=data:application/json;base64,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QUFDLENBQUEsS0FBSyxDQUFDLE9BRmxDO0VBQUEsQ0FsWGhCLENBQUE7O0FBQUEsdUJBc1hBLFFBQUEsR0FBVSxTQUFBLEdBQUE7V0FFUixJQUFDLENBQUEsUUFBUSxDQUFDLE1BQVYsQ0FBaUIsSUFBQyxDQUFBLEtBQWxCLEVBQXlCLElBQUMsQ0FBQSxNQUExQixFQUZRO0VBQUEsQ0F0WFYsQ0FBQTs7QUFBQSx1QkEwWEEsTUFBQSxHQUFRLFNBQUEsR0FBQTtBQUNOLElBQUEsSUFBRyxJQUFDLENBQUEsY0FBRCxDQUFBLENBQUg7QUFFRSxNQUFBLHFCQUFBLENBQXNCLFVBQVUsQ0FBQSxTQUFFLENBQUEsTUFBTSxDQUFDLElBQW5CLENBQXdCLElBQXhCLENBQXRCLENBQUEsQ0FBQTtBQUFBLE1BR0EsSUFBQyxDQUFBLGdCQUFELENBQUEsQ0FIQSxDQUFBO0FBQUEsTUFNQSxJQUFDLENBQUEsUUFBRCxDQUFBLENBTkEsQ0FGRjtLQUFBLE1BQUE7QUFZRSxNQUFBLElBQUMsQ0FBQSxXQUFELEdBQWUsS0FBZixDQVpGO0tBRE07RUFBQSxDQTFYUixDQUFBOztvQkFBQTs7SUFGRixDQUFBOztBQUFBLFFBNllRLENBQUMsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFNBQUEsR0FBQTtBQUM1QyxNQUFBLEVBQUE7QUFBQSxFQUFBLEVBQUEsR0FBUyxJQUFBLFVBQUEsQ0FBVyxRQUFRLENBQUMsSUFBcEIsRUFBMEIsQ0FDakMsMkJBRGlDLEVBRWpDLDJCQUZpQyxFQUdqQywyQkFIaUMsRUFJakMsMkJBSmlDLEVBS2pDLDJCQUxpQyxFQU1qQywyQkFOaUMsQ0FBMUIsQ0FBVCxDQUFBO0FBQUEsRUFTQSxFQUFFLENBQUMsS0FBSCxDQUFBLENBVEEsQ0FENEM7QUFBQSxDQUE5QyxDQTdZQSxDQUFBIiwiZmlsZSI6InRocmVlc2l4dHkubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVGhyZWVTaXh0eVxuXG4gIFNjYWxlOiAxMFxuXG4gIE1heFJvdGF0aW9uOiBNYXRoLlBJLzRcblxuICAjIERpcmVjdGlvbiBjb25zdGFudHNcbiAgTEVGVDogJ2xlZnQnXG4gIFJJR0hUOiAncmlnaHQnXG4gIFVQOiAndXAnXG4gIERPV046ICdkb3duJ1xuICBJTjogJ2luJ1xuICBPVVQ6ICdvdXQnXG4gIFJFU0VUOiAncmVzZXQnXG5cbiAgQ0FNRVJBX01PREU6ICdjYW1lcmFfbW9kZSdcbiAgQVJST1dfTU9ERTogJ2Fycm93X21vZGUnXG5cbiAgY29uc3RydWN0b3I6IChib3gsIHVybHMpIC0+XG4gICAgQHVybHMgPSB1cmxzXG4gICAgQGJveCA9IGJveFxuXG4gICAgQGRpcmVjdGlvbnMgPSB7fVxuXG4gICAgQG1vdXNlID1cbiAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgIHBhbm5pbmc6IGZhbHNlXG4gICAgICBzcGVlZDpcbiAgICAgICAgeDogMFxuICAgICAgICB5OiAwXG4gICAgICAgIHo6IDBcblxuICAgIEBwYW5UbyA9XG4gICAgICBhY3RpdmU6IGZhbHNlXG4gICAgICB0aW1lOlxuICAgICAgICBzdGFydDogMFxuICAgICAgICBlbmQ6IDBcbiAgICAgIGZyb206XG4gICAgICAgIHJvdGF0aW9uOlxuICAgICAgICAgIHg6IDBcbiAgICAgICAgICB5OiAwXG4gICAgICAgICAgejogMFxuICAgICAgdG86XG4gICAgICAgIHJvdGF0aW9uOlxuICAgICAgICAgIHg6IDBcbiAgICAgICAgICB5OiAwXG4gICAgICAgICAgejogMFxuXG4gICAgQGlzUmVuZGVyaW5nID0gZmFsc2VcblxuICAgIEBjb21wYXNzTmVlZGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQgJ2NvbXBhc3MtZGlyZWN0aW9uLWljb24nXG5cbiAgc3RhcnQ6IC0+XG4gICAgIyBDcmVhdGUgdGhlIHNjZW5lXG4gICAgQGluaXRTY2VuZSA9PlxuICAgICAgIyBBZGQgdGhlIG9iamVjdHMgdG8gcmVuZGVyXG4gICAgICBAaW5pdE9iamVjdHMgPT5cbiAgICAgICAgIyBBZGQgdGhlIHJlbmRlcmVyXG4gICAgICAgIEBpbml0UmVuZGVyZXIgPT5cbiAgICAgICAgICAjIEFkZCB0aGUgY2FsbGJhY2tzIGZvciBtYW5hZ2VtZW50XG4gICAgICAgICAgQGluaXRDb250cm9scyA9PlxuICAgICAgICAgICAgIyBGb3JjZSBhIHJlbmRlclxuICAgICAgICAgICAgQGRvUmVuZGVyKClcblxuICAgICAgICAgICAgcmV0dXJuXG5cbiAgICAgICAgICByZXR1cm5cblxuICAgICAgICByZXR1cm5cblxuICAgICAgcmV0dXJuXG5cbiAgICByZXR1cm5cblxuICBpbml0U2NlbmU6IChjYikgPT5cbiAgICAjIEluaXQgU2NlbmVcbiAgICBAc2NlbmUgPSBuZXcgKFRIUkVFLlNjZW5lKVxuXG4gICAgIyBJbml0IENhbWVyYVxuICAgIEBjYW1lcmEgPSBuZXcgKFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKSg3MCwgd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQsIDEsIFRocmVlU2l4dHk6OlNjYWxlICogMTApXG5cbiAgICBAcGFyZW50T2JqZWN0ID0gbmV3IFRIUkVFLk9iamVjdDNEKClcbiAgICBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLm9yZGVyID0gJ1lYWidcbiAgICBAc2NlbmUuYWRkIEBwYXJlbnRPYmplY3RcblxuICAgIEBwYXJlbnRPYmplY3QuYWRkIEBjYW1lcmFcblxuICAgICMgQmVjYXVzZSB3ZSBkb24ndCByb3RhdGUgaW4gdGhlIFogZGlyZWN0aW9uLCB0aGlzIHdpbGwgYmUgYSBuYXR1cmFsIHJvdGF0aW9uIG9yZGVyXG4gICAgQGNhbWVyYS5yb3RhdGlvbi5vcmRlciA9ICdZWFonXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAncmVzaXplJywgKCgpID0+XG4gICAgICAjIENvcnJlY3QgdGhlIGNhbWVyYSdzIGFzcGVjdCByYXRpb1xuICAgICAgQGNhbWVyYS5hc3BlY3QgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIHdpbmRvdy5pbm5lckhlaWdodFxuICAgICAgQGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KClcblxuICAgICAgIyBBZGp1c3QgdGhlIHJlbmRlcmVyIHNpemVcbiAgICAgIEByZW5kZXJlci5zZXRTaXplIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHRcblxuICAgICAgIyBSZS1yZW5kZXIgdGhpcyBvbmUgdGltZVxuICAgICAgQGRvUmVuZGVyKClcblxuICAgICAgIyBFeGl0XG4gICAgICByZXR1cm5cbiAgICApLCBmYWxzZVxuXG4gICAgY2IoKVxuXG4gIGluaXRPYmplY3RzOiAoY2IpID0+XG4gICAgVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZUN1YmUgQHVybHMsIG51bGwsICh0ZXh0dXJlKSA9PlxuICAgICAgIyBpbml0IHRoZSBjdWJlIHNoYWRkZXJcbiAgICAgIHNoYWRlciA9IFRIUkVFLlNoYWRlckxpYlsnY3ViZSddXG5cbiAgICAgICMgU2V0dXAgdGhlIHVuaWZvcm1cbiAgICAgIHVuaWZvcm1zID0gVEhSRUUuVW5pZm9ybXNVdGlscy5jbG9uZShzaGFkZXIudW5pZm9ybXMpXG4gICAgICB1bmlmb3Jtc1sndEN1YmUnXS52YWx1ZSA9IHRleHR1cmVcblxuICAgICAgIyBjYW1lcmF0ZSB0aGUgbWF0ZXJpYWxcbiAgICAgIG1hdGVyaWFsID0gbmV3IChUSFJFRS5TaGFkZXJNYXRlcmlhbCkoXG4gICAgICAgIGZyYWdtZW50U2hhZGVyOiBzaGFkZXIuZnJhZ21lbnRTaGFkZXJcbiAgICAgICAgdmVydGV4U2hhZGVyOiBzaGFkZXIudmVydGV4U2hhZGVyXG4gICAgICAgIHVuaWZvcm1zOiB1bmlmb3Jtc1xuICAgICAgICBzaWRlOiBUSFJFRS5CYWNrU2lkZSlcblxuICAgICAgIyBHZW5lcmF0ZSBhIHNwaGVyZSBnZW9tZXRyeVxuICAgICAgbWVzaEdlb21ldHJ5ID0gbmV3IChUSFJFRS5TcGhlcmVHZW9tZXRyeSkoVGhyZWVTaXh0eTo6U2NhbGUsIDMyLCAzMilcblxuICAgICAgIyBidWlsZCB0aGUgc2t5Ym94IE1lc2ggdXNpbmcgdGhlIHRleHR1cmUgY3ViZVxuICAgICAgc2t5Qm94ID0gbmV3IChUSFJFRS5NZXNoKShtZXNoR2VvbWV0cnksIG1hdGVyaWFsKVxuXG4gICAgICAjIGFuZCBhZGQgaXQgdG8gdGhlIHNjZW5lXG4gICAgICBAc2NlbmUuYWRkIHNreUJveFxuXG4gICAgICBjYigpXG5cbiAgaW5pdFJlbmRlcmVyOiAoY2IpID0+XG4gICAgQHJlbmRlcmVyID0gbmV3IChUSFJFRS5XZWJHTFJlbmRlcmVyKSgpXG4gICAgQHJlbmRlcmVyLnNldFNpemUgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodFxuICAgIEBib3guYXBwZW5kQ2hpbGQgQHJlbmRlcmVyLmRvbUVsZW1lbnRcblxuICAgIGNiKClcblxuICBpbml0Q29udHJvbHM6IChjYikgPT5cbiAgICAjIEtleWJvYXJkIHNob3J0Y3V0c1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2tleWRvd24nLCBAZXZlbnRPbktleURvd24sIGZhbHNlXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5dXAnLCBAZXZlbnRPbktleVVwLCBmYWxzZVxuXG4gICAgIyBNb3VzZSBkcmFnZ2luZ1xuICAgIEByZW5kZXJlci5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ21vdXNlZG93bicsIEBldmVudE1vdXNlRG93biwgZmFsc2VcbiAgICBAcmVuZGVyZXIuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyICdtb3VzZW1vdmUnLCBAZXZlbnRNb3VzZU1vdmUsIGZhbHNlXG4gICAgQHJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAnbW91c2V1cCcsIEBldmVudE1vdXNlVXAsIGZhbHNlXG4gICAgQHJlbmRlcmVyLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAnbW91c2VvdXQnLCBAZXZlbnRNb3VzZVVwLCBmYWxzZVxuXG4gICAgbWFwQ29udHJvbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsICdbZGF0YS1tYXAtY29udHJvbF0nXG5cbiAgICBmb3IgbWFwQ29udHJvbCBpbiBtYXBDb250cm9sc1xuICAgICAgZG8gKG1hcENvbnRyb2wpID0+XG4gICAgICAgIGRpcmVjdGlvbiA9IG1hcENvbnRyb2wuZGF0YXNldC5tYXBDb250cm9sXG5cbiAgICAgICAgbWFwQ29udHJvbC5hZGRFdmVudExpc3RlbmVyICdjbGljaycsIChlKSA9PlxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAgICAgQGV2ZW50RG9Eb21Db250cm9sIGRpcmVjdGlvblxuXG4gICAgICAgICAgcmV0dXJuXG5cbiAgICBjYigpXG5cbiAgZXZlbnREb0RvbUNvbnRyb2w6IChvcGVyYXRpb24pID0+XG4gICAgQHBhblRvLnRpbWUuc3RhcnQgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpXG4gICAgQHBhblRvLnRpbWUuZW5kID0gQHBhblRvLnRpbWUuc3RhcnQgKyA3MDBcblxuICAgICMgZ2V0IHRoZSBjdXJyZW50IGNhbWVyYSByb3RhdGlvblxuICAgIGZyb21Sb3RhdGlvbiA9IEBwYXJlbnRPYmplY3Qucm90YXRpb24uY2xvbmUoKVxuXG4gICAgQHBhblRvLmZyb20ucm90YXRpb24gPSBmcm9tUm90YXRpb25cbiAgICBAcGFuVG8udG8ucm90YXRpb24gPSBmcm9tUm90YXRpb24uY2xvbmUoKVxuXG4gICAgQHBhblRvLmZyb20ucG9zaXRpb24gPSBAY2FtZXJhLnBvc2l0aW9uLnpcbiAgICBAcGFuVG8udG8ucG9zaXRpb24gPSBAcGFuVG8uZnJvbS5wb3NpdGlvblxuXG4gICAgc3dpdGNoIG9wZXJhdGlvblxuICAgICAgd2hlbiBUaHJlZVNpeHR5OjpMRUZUXG4gICAgICAgICMgbW92ZSB1cyBQSS8yIGluIHRoZSArWSBkaXJlY3Rpb25cbiAgICAgICAgQHBhblRvLnRvLnJvdGF0aW9uLnkgPSBAcGFuVG8uZnJvbS5yb3RhdGlvbi55ICsgTWF0aC5QSS8yXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OlJJR0hUXG4gICAgICAgICMgbW92ZSB1cyBQSS8yIGluIHRoZSAtWSBkaXJlY3Rpb25cbiAgICAgICAgQHBhblRvLnRvLnJvdGF0aW9uLnkgPSBAcGFuVG8uZnJvbS5yb3RhdGlvbi55IC0gTWF0aC5QSS8yXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OklOXG4gICAgICAgIEBwYW5Uby50by5wb3NpdGlvbiAtPSAxXG4gICAgICB3aGVuIFRocmVlU2l4dHk6Ok9VVFxuICAgICAgICBAcGFuVG8udG8ucG9zaXRpb24gKz0gMVxuICAgICAgd2hlbiBUaHJlZVNpeHR5OjpSRVNFVFxuICAgICAgICBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnkgPSBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnkgJSAoMiAqIE1hdGguUEkpXG5cbiAgICAgICAgQHBhblRvLnRvLnJvdGF0aW9uLnggPSAwXG4gICAgICAgIEBwYW5Uby50by5yb3RhdGlvbi55ID0gMFxuICAgICAgICBAcGFuVG8udG8ucG9zaXRpb24gPSAwXG4gICAgICBlbHNlXG4gICAgICAgIGNvbnNvbGUubG9nIFwiY2FuJ3QgZG8gI3tvcGVyYXRpb259XCJcbiAgICAgICAgcmV0dXJuXG5cbiAgICBAcGFuVG8udG8ucG9zaXRpb24gPSBAY2xhbXBQb3NpdGlvbihAcGFuVG8udG8ucG9zaXRpb24pXG4gICAgQGNsYW1wUm90YXRpb24oQHBhblRvLnRvKVxuXG4gICAgIyBtYXJrIHRoZSBwYW5uaW5nIGFzIGFjdGl2ZVxuICAgIEBwYW5Uby5hY3RpdmUgPSB0cnVlXG5cbiAgICAjIGJlZ2luIHRoZSByZW5kZXJcbiAgICBAc3RhcnRSZW5kZXIoKVxuXG4gICAgcmV0dXJuXG5cbiAgZXZlbnRPbktleURvd246IChlKSA9PlxuICAgICMgR2V0IHRoZSBkaXJlY3Rpb25cbiAgICBkaXIgPSBAZ2V0RGlyZWN0aW9uIGUua2V5Q29kZVxuXG4gICAgIyBJZiB0aGlzIGlzIGEgZGlyZWN0aW9uIGtleS4uLlxuICAgIGlmIGRpcj9cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuXG4gICAgICAjIFBlcmZvcm0gaXQncyBhY3Rpb25cbiAgICAgIEBiZWdpbktleVByZXNzIGRpclxuXG4gICAgICAjIEFuZCBmaW5pc2hcbiAgICAgIHJldHVyblxuXG4gIGV2ZW50T25LZXlVcDogKGUpID0+XG4gICAgIyBHZXQgdGhlIGRpcmVjdGlvblxuICAgIGRpciA9IEBnZXREaXJlY3Rpb24gZS5rZXlDb2RlXG5cbiAgICAjIElmIHRoaXMgaXMgYSBkaXJlY3Rpb24ga2V5Li4uXG4gICAgaWYgZGlyP1xuICAgICAgIyBQZXJmb3JtIGl0J3MgYWN0aW9uXG4gICAgICBAZW5kS2V5UHJlc3MgZGlyXG5cbiAgICAgICMgQW5kIGZpbmlzaFxuICAgICAgcmV0dXJuXG5cbiAgZXZlbnRNb3VzZURvd246ICgpID0+XG4gICAgcmV0dXJuXG5cbiAgZXZlbnRNb3VzZU1vdmU6IChlKSA9PlxuICAgIHJldHVyblxuXG4gIGV2ZW50TW91c2VVcDogKCkgPT5cbiAgICByZXR1cm5cblxuICBlbmRLZXlQcmVzczogKGRpcmVjdGlvbikgPT5cbiAgICAjIElmIHdlIGFyZW4ndCB0cmFja2luZyBpdFxuICAgIEBkaXJlY3Rpb25zW2RpcmVjdGlvbl0gPSBmYWxzZSBpZiBAZGlyZWN0aW9uc1tkaXJlY3Rpb25dXG5cbiAgYmVnaW5LZXlQcmVzczogKGRpcmVjdGlvbikgPT5cbiAgICAjIElmIHdlIGFscmVhZHkgYXJlIG1hbmFnaW5nIHRoaXMgZGlyZWN0aW9uXG4gICAgaWYgQGRpcmVjdGlvbnNbZGlyZWN0aW9uXVxuICAgICAgIyBUaGVuIGp1c3QgcmV0dXJuXG4gICAgICByZXR1cm5cblxuICAgICMgT3RoZXJ3aXNlIHNldCBpdCB0byB0cnVlXG4gICAgQGRpcmVjdGlvbnNbZGlyZWN0aW9uXSA9IHRydWVcblxuICAgIEBzdGFydFJlbmRlcigpXG5cbiAgZ2V0RGlyZWN0aW9uOiAoa2V5KSA9PlxuICAgIHN3aXRjaCBrZXlcbiAgICAgIHdoZW4gMzcsIDY1IHRoZW4gVGhyZWVTaXh0eTo6TEVGVFxuICAgICAgd2hlbiAzOCwgODcgdGhlbiBUaHJlZVNpeHR5OjpVUFxuICAgICAgd2hlbiAzOSwgNjggdGhlbiBUaHJlZVNpeHR5OjpSSUdIVFxuICAgICAgd2hlbiA0MCwgODMgdGhlbiBUaHJlZVNpeHR5OjpET1dOXG4gICAgICB3aGVuIDE4NyB0aGVuIFRocmVlU2l4dHk6OklOXG4gICAgICB3aGVuIDE4OSB0aGVuIFRocmVlU2l4dHk6Ok9VVFxuICAgICAgd2hlbiA2NyB0aGVuIFRocmVlU2l4dHk6OkNBTUVSQV9NT0RFXG4gICAgICB3aGVuIDg2IHRoZW4gVGhyZWVTaXh0eTo6QVJST1dfTU9ERVxuICAgICAgZWxzZVxuICAgICAgICBjb25zb2xlLmVycm9yIFwiZGlyZWN0aW9uIG5vdCBrbm93bjogI3trZXl9XCJcbiAgICAgICAgZmFsc2VcblxuICBtb3ZlOiAoZGlyZWN0aW9uKSA9PlxuICAgIHN3aXRjaCBkaXJlY3Rpb25cbiAgICAgIHdoZW4gVGhyZWVTaXh0eTo6TEVGVFxuICAgICAgICBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnkgKz0gTWF0aC5QSSAvIDIwMFxuICAgICAgd2hlbiBUaHJlZVNpeHR5OjpVUFxuICAgICAgICBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnggKz0gTWF0aC5QSSAvIDIwMFxuICAgICAgd2hlbiBUaHJlZVNpeHR5OjpSSUdIVFxuICAgICAgICBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnkgLT0gTWF0aC5QSSAvIDIwMFxuICAgICAgd2hlbiBUaHJlZVNpeHR5OjpET1dOXG4gICAgICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueCAtPSBNYXRoLlBJIC8gMjAwXG4gICAgICB3aGVuIFRocmVlU2l4dHk6OklOXG4gICAgICAgIEBjYW1lcmEucG9zaXRpb24ueiArPSBUaHJlZVNpeHR5OjpTY2FsZSAvIC0xMDBcbiAgICAgIHdoZW4gVGhyZWVTaXh0eTo6T1VUXG4gICAgICAgIEBjYW1lcmEucG9zaXRpb24ueiArPSBUaHJlZVNpeHR5OjpTY2FsZSAvIDEwMFxuICAgICAgZWxzZSBudWxsXG5cbiAgICBAY2FtZXJhLnBvc2l0aW9uLnogPSBAY2xhbXBQb3NpdGlvbihAY2FtZXJhLnBvc2l0aW9uLnopXG4gICAgQGNsYW1wUm90YXRpb24oQHBhcmVudE9iamVjdClcblxuICAgIHJldHVyblxuXG4gIGNsYW1wUG9zaXRpb246IChwb3NpdGlvbikgPT5cbiAgICBpZiBwb3NpdGlvbiA8IFRocmVlU2l4dHk6OlNjYWxlICogLTAuNFxuICAgICAgVGhyZWVTaXh0eTo6U2NhbGUgKiAtMC40XG4gICAgZWxzZSBpZiBwb3NpdGlvbiA+IDBcbiAgICAgIDBcbiAgICBlbHNlXG4gICAgICBwb3NpdGlvblxuXG4gIGNsYW1wUm90YXRpb246IChvYmplY3QpID0+XG4gICAgaWYgb2JqZWN0LnJvdGF0aW9uLnggPiBUaHJlZVNpeHR5OjpNYXhSb3RhdGlvblxuICAgICAgb2JqZWN0LnJvdGF0aW9uLnggPSBUaHJlZVNpeHR5OjpNYXhSb3RhdGlvblxuXG4gICAgaWYgb2JqZWN0LnJvdGF0aW9uLnggPCAtVGhyZWVTaXh0eTo6TWF4Um90YXRpb25cbiAgICAgIG9iamVjdC5yb3RhdGlvbi54ID0gLVRocmVlU2l4dHk6Ok1heFJvdGF0aW9uXG5cbiAgICByZXR1cm5cblxuICBzdGFydFJlbmRlcjogPT5cbiAgICAjIElmIGl0IGlzIG5vdCByZW5kZXJpbmcuLi5cbiAgICBpZiAhQGlzUmVuZGVyaW5nXG5cbiAgICAgICMgVGhlbiBtYXJrIGl0IGFzIHJlbmRlcmluZ1xuICAgICAgQGlzUmVuZGVyaW5nID0gdHJ1ZVxuXG4gICAgICAjIEFuZCBzdGFydCB0aGUgcmVuZGVyXG4gICAgICBAcmVuZGVyKClcblxuICAgIHJldHVyblxuXG4gIHByb2Nlc3NQYW5UbzogKCkgPT5cbiAgICBUYyA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKClcblxuICAgIGlmIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueSAhPSBAcGFuVG8udG8ucm90YXRpb24ueVxuICAgICAgQHBhcmVudE9iamVjdC5yb3RhdGlvbi55ID0gQHF1YWRyYXRpY0Vhc2VJbkVhc2VPdXQoVGMsIEBwYW5Uby50by5yb3RhdGlvbi55LCBAcGFuVG8uZnJvbS5yb3RhdGlvbi55KVxuXG4gICAgaWYgQHBhcmVudE9iamVjdC5yb3RhdGlvbi54ICE9IEBwYW5Uby50by5yb3RhdGlvbi54XG4gICAgICBAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnggPSBAcXVhZHJhdGljRWFzZUluRWFzZU91dChUYywgQHBhblRvLnRvLnJvdGF0aW9uLngsIEBwYW5Uby5mcm9tLnJvdGF0aW9uLngpXG5cbiAgICBpZiBAY2FtZXJhLnBvc2l0aW9uLnogIT0gQHBhblRvLnRvLnBvc2l0aW9uXG4gICAgICBAY2FtZXJhLnBvc2l0aW9uLnogPSBAcXVhZHJhdGljRWFzZUluRWFzZU91dChUYywgQHBhblRvLnRvLnBvc2l0aW9uLCBAcGFuVG8uZnJvbS5wb3NpdGlvbilcblxuICAgIGlmIFRjID49IEBwYW5Uby50aW1lLmVuZFxuICAgICAgQHBhcmVudE9iamVjdC5yb3RhdGlvbi55ID0gQHBhblRvLnRvLnJvdGF0aW9uLnlcbiAgICAgIEBwYXJlbnRPYmplY3Qucm90YXRpb24ueCA9IEBwYW5Uby50by5yb3RhdGlvbi54XG4gICAgICBAY2FtZXJhLnBvc2l0aW9uLnogPSBAcGFuVG8udG8ucG9zaXRpb25cblxuICAgICAgIyBzdG9wIHBhbm5pbmdcbiAgICAgIEBwYW5Uby5hY3RpdmUgPSBmYWxzZVxuXG4gICAgcmV0dXJuXG5cbiAgcXVhZHJhdGljRWFzZUluRWFzZU91dDogKFRjLCBHLCBCKSA9PlxuICAgICMgY29tcHV0ZSB0aW1lXG4gICAgdCA9IDIgKiAoVGMgLSBAcGFuVG8udGltZS5zdGFydCkgLyAoQHBhblRvLnRpbWUuZW5kIC0gQHBhblRvLnRpbWUuc3RhcnQpXG5cbiAgICBpZiB0IDwgMVxuICAgICAgcmV0dXJuICgoRyAtIEIpLzIpICogdCAqIHQgKyBCXG4gICAgZWxzZVxuICAgICAgdCA9IHQgLSAxXG4gICAgICByZXR1cm4gKChCIC0gRykvMikgKiAodCAqICh0IC0gMikgLSAxKSArIEJcblxuICBwcm9jZXNzTW92ZW1lbnRzOiAoKSA9PlxuICAgIF8ubWFwIEBkaXJlY3Rpb25zLCAoZW5hYmxlZCwgZGlyZWN0aW9uKSA9PlxuICAgICAgQG1vdmUgZGlyZWN0aW9uIGlmIGVuYWJsZWRcblxuICAgIGlmIEBwYW5Uby5hY3RpdmVcbiAgICAgIEBwcm9jZXNzUGFuVG8oKVxuXG4gICAgIyBhZGp1c3QgdGhlIHJvdGF0aW9uIG9mIHRoZSBjb21wYXNzIG5lZWRsZVxuICAgIHJvdGF0aW9uU3RyaW5nID0gXCJyb3RhdGUoI3tAcGFyZW50T2JqZWN0LnJvdGF0aW9uLnl9cmFkKVwiXG4gICAgQGNvbXBhc3NOZWVkbGUuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gcm90YXRpb25TdHJpbmdcbiAgICBAY29tcGFzc05lZWRsZS5zdHlsZS50cmFuc2Zvcm0gPSByb3RhdGlvblN0cmluZ1xuXG4gICAgcmV0dXJuXG5cbiAgc2hvdWxkUmVyZW5kZXI6ID0+XG4gICAgIyBJZiB0aGVyZSBhcmUgc29tZSBkaXJlY3Rpb25zIGFjdGl2ZS4uLlxuICAgIEBtb3VzZS5wYW5uaW5nIG9yIF8uc29tZShAZGlyZWN0aW9ucykgb3IgQHBhblRvLmFjdGl2ZVxuXG4gIGRvUmVuZGVyOiAtPlxuICAgICMgUmVuZGVyIHRoZSBzY2VuZVxuICAgIEByZW5kZXJlci5yZW5kZXIgQHNjZW5lLCBAY2FtZXJhXG5cbiAgcmVuZGVyOiA9PlxuICAgIGlmIEBzaG91bGRSZXJlbmRlcigpXG4gICAgICAjIFJlcXVlc3QgdGhlIGFuaW1hdGlvbiB0byByZXBlYXQgb25jZSBtb3JlXG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgVGhyZWVTaXh0eTo6cmVuZGVyLmJpbmQodGhpcylcblxuICAgICAgIyBQcm9jZXNzIGFsbCB0aGUgbW92ZW1lbnRzXG4gICAgICBAcHJvY2Vzc01vdmVtZW50cygpXG5cbiAgICAgICMgRG8gdGhlIHJlbmRlclxuICAgICAgQGRvUmVuZGVyKClcblxuICAgIGVsc2VcbiAgICAgICMgRmluaXNoZWQgcmVuZGVyaW5nXG4gICAgICBAaXNSZW5kZXJpbmcgPSBmYWxzZVxuXG4gICAgcmV0dXJuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ0RPTUNvbnRlbnRMb2FkZWQnLCAtPlxuICB0cyA9IG5ldyBUaHJlZVNpeHR5IGRvY3VtZW50LmJvZHksIFtcbiAgICAnaW1hZ2VzL3lva29oYW1hL3Bvcy14LmpwZycsXG4gICAgJ2ltYWdlcy95b2tvaGFtYS9uZWcteC5qcGcnLFxuICAgICdpbWFnZXMveW9rb2hhbWEvcG9zLXkuanBnJyxcbiAgICAnaW1hZ2VzL3lva29oYW1hL25lZy15LmpwZycsXG4gICAgJ2ltYWdlcy95b2tvaGFtYS9wb3Mtei5qcGcnLFxuICAgICdpbWFnZXMveW9rb2hhbWEvbmVnLXouanBnJ1xuICBdXG5cbiAgdHMuc3RhcnQoKVxuXG4gIHJldHVyblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9